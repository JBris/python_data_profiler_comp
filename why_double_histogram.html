<div></div><iframe srcdoc="&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
  &lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot; /&gt;
    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot; /&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot; /&gt;
    &lt;meta name=&quot;description&quot; content=&quot;&quot; /&gt;
    &lt;meta name=&quot;author&quot; content=&quot;&quot; /&gt;

    &lt;title&gt;Profile Visualizer | whylogs&lt;/title&gt;

    &lt;link rel=&quot;icon&quot; href=&quot;images/whylabs-favicon.png&quot; type=&quot;image/png&quot; sizes=&quot;16x16&quot; /&gt;
    &lt;link rel=&quot;preconnect&quot; href=&quot;https://fonts.googleapis.com&quot; /&gt;
    &lt;link rel=&quot;preconnect&quot; href=&quot;https://fonts.gstatic.com&quot; crossorigin /&gt;
    &lt;link href=&quot;https://fonts.googleapis.com/css2?family=Asap:wght@400;500;600;700&amp;display=swap&quot; rel=&quot;stylesheet&quot; /&gt;
    &lt;link rel=&quot;preconnect&quot; href=&quot;https://fonts.gstatic.com&quot; /&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css&quot; /&gt;

    &lt;script
      src=&quot;https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.7.7/handlebars.min.js&quot;
      integrity=&quot;sha512-RNLkV3d+aLtfcpEyFG8jRbnWHxUqVZozacROI4J2F1sTaDqo1dPQYs01OMi1t1w9Y2FdbSCDSQ2ZVdAC8bzgAg==&quot;
      crossorigin=&quot;anonymous&quot;
      referrerpolicy=&quot;no-referrer&quot;
    &gt;&lt;/script&gt;

    &lt;style type=&quot;text/css&quot;&gt;

      :root {
        /** Branded colors */
        --brandSecondary900: #4f595b;
        --secondaryLight1000: #313b3d;
        /** Purpose colors */
        --tealBackground: #eaf2f3;
      }

      /* RESET STYLE */
      *,
      *::after,
      *::before {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        overflow-y: hidden;
      }

      /* Screen on smaller screens */
      .no-responsive {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        z-index: 1031;
        width: 100vw;
        height: 100vh;
        background-color: var(--tealBackground);
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .desktop-content {
        display: flex;
        flex-direction: column;
      }

      .no-responsive__content {
        max-width: 600px;
        width: 100%;
        padding: 0 24px;
      }

      .no-responsive__title {
        font-size: 96px;
        font-weight: 300;
        color: var(--brandSecondary900);
        line-height: 1.167;
      }

      .no-responsive__text {
        margin: 0;
        font-size: 16px;
        font-weight: 400;
        color: var(--brandSecondary900);
        line-height: 1.5;
      }

      .svg-container {
        display: inline-block;
        position: relative;
        width: 100%;
        vertical-align: top;
        overflow: hidden;
      }

      .svg-content-responsive {
        display: inline-block;
        position: absolute;
        left: 0;
      }

      .circle-color {
       display: inline-block;
       padding: 5px;
       border-radius: 50px;
     }

     .colors-for-distingushing-charts {
       padding-right: 10px;
     }

     .display-flex{
       display: flex;
     }

     .align-items-flex-end {
       align-items: flex-end;
     }

     .chart-box-title {
       width: 88%;
       justify-content: space-between;
       margin: 10px;
       margin-top: 15px;
       bottom: 0;
     }

     .chart-box-title p{
       margin-bottom: 0;
       font-family: Asap;
       font-weight: bold;
       font-size: 18px;
       line-height: 16px;
       color: #4F595B;
     }

    .bar {
      font: 10px sans-serif;
    }

    .bar path,
    .bar line {
      fill: none;
      stroke: #000;
      shape-rendering: crispEdges;
    }

    .error-message {
      display: flex;
      justify-content: center;
      align-items: center;
      color: rgb(255, 114, 71);
      font-size: 30px;
      font-weight: 900;
    }

     @media screen and (min-width: 500px) {
       .desktop-content {
         display: block;
       }
       .no-responsive {
         display: none;
       }
     }
    &lt;/style&gt;
  &lt;/head&gt;

  &lt;body id=&quot;generated-html&quot;&gt;&lt;/body&gt;
  &lt;script id=&quot;entry-template&quot; type=&quot;text/x-handlebars-template&quot;&gt;
    
      &lt;div class=&quot;desktop-content&quot;&gt;
{{#each this}}              &lt;div class=&quot;chart-box&quot; id=&quot;chart-box&quot;&gt;
                &lt;div class=&quot;chart-box-title display-flex&quot;&gt;
                  &lt;p&gt;{{@key}}&lt;/p&gt;
                  &lt;div class=&quot;display-flex&quot;&gt;
                    &lt;div class=&quot;colors-for-distingushing-charts&quot;&gt;
                      &lt;div class=&quot;circle-color&quot; style=&quot;background: #44C0E7;&quot;&gt;&lt;/div&gt;
                      &lt;text alignment-baseline=&quot;middle&quot; style=&quot;font-size: 15px;&quot;&gt;Target&lt;/text&gt;
                    &lt;/div&gt;
                    &lt;div class=&quot;colors-for-distingushing-charts&quot;&gt;
                      &lt;div class=&quot;circle-color&quot; style=&quot;background: #F5843C&quot;&gt;&lt;/div&gt;
                      &lt;text alignment-baseline=&quot;middle&quot; style=&quot;font-size: 15px;&quot;&gt;Reference&lt;/text&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;&lt;/div&gt;
                &lt;div class=&quot;svg-container&quot;&gt;{{{getDoubleHistogramChart this}}}&lt;/div&gt;
              &lt;/div&gt;
{{/each}}      &lt;/div&gt;
      &lt;div class=&quot;no-responsive&quot;&gt;
        &lt;div class=&quot;no-responsive__content&quot;&gt;
          &lt;h1 class=&quot;no-responsive__title&quot;&gt;Hold on! :)&lt;/h1&gt;
          &lt;p class=&quot;no-responsive__text&quot;&gt;
            It looks like your current screen size or device is not yet supported by the WhyLabs Sandbox. The Sandbox is
            best experienced on a desktop computer. Please try maximizing this window or switching to another device. We
            are working on adding support for a larger variety of devices.
          &lt;/p&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    
  &lt;/script&gt;

  &lt;script src=&quot;https://code.jquery.com/jquery-3.6.0.min.js&quot; integrity=&quot;sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=&quot; crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt;

  &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/d3/6.7.0/d3.min.js&quot; integrity=&quot;sha512-cd6CHE+XWDQ33ElJqsi0MdNte3S+bQY819f7p3NUHgwQQLXSKjE4cPZTeGNI+vaxZynk1wVU3hoHmow3m089wA==&quot; crossorigin=&quot;anonymous&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/script&gt;

  &lt;script&gt;
    function registerHandlebarHelperFunctions() {
      //helper fun

      class GenerateChartParams {
        constructor(height, width, targetData, referenceData, bottomMargin=30, topMargin=5) {
          this.MARGIN = {
            TOP: topMargin,
            RIGHT: 5,
            BOTTOM: bottomMargin,
            LEFT: 55,
          };
          this.SVG_WIDTH = width;
          this.SVG_HEIGHT = height;
          this.CHART_WIDTH = this.SVG_WIDTH - this.MARGIN.LEFT - this.MARGIN.RIGHT;
          this.CHART_HEIGHT = this.SVG_HEIGHT - this.MARGIN.TOP - this.MARGIN.BOTTOM;
          this.svgEl = d3.create(&quot;svg&quot;)
             .attr(&quot;preserveAspectRatio&quot;, &quot;xMinYMin meet&quot;)
             .attr(&quot;viewBox&quot;, `0 0 ${$(window).width()+100} ${$(window).height()-30}`)
             .classed(&quot;svg-content-responsive&quot;, true)
          this.maxYValue = d3.max(targetData, (d) =&gt; Math.abs(d.axisY));
          this.minYValue = d3.min(targetData, (d) =&gt; Math.abs(d.axisY));
          const mergedReferenceData = referenceData.map(({axisX, axisY}) =&gt; {
            return {axisX, axisY}
          })
          const mergedTargetedData = targetData.map(({axisX, axisY}) =&gt; {
            return {axisX, axisY}
          })

          this.charts2 = mergedReferenceData.concat(mergedTargetedData)
          this.charts2 = this.charts2.sort(function(a, b) { return a - b; });

          this.targetBinWidth = targetData[1]?.axisX - targetData[0]?.axisX
          this.referenceBinWidth = referenceData[1]?.axisX - referenceData[0]?.axisX
          this.maxTargetXValue = d3.max(targetData, (d) =&gt; d.axisX);

          this.maxReferenceXValue = d3.max(referenceData, (d) =&gt; d.axisX);

          this.xScale = d3
              .scaleLinear()
         .domain([d3.min(this.charts2, function(d) { return parseFloat(d.axisX); }),(this.maxTargetXValue+this.targetBinWidth &gt;= this.maxReferenceXValue+this.referenceBinWidth) ? this.maxTargetXValue+this.targetBinWidth:this.maxReferenceXValue+this.referenceBinWidth])
         .range([0, this.CHART_WIDTH ]);

         this.svgEl.append(&quot;g&quot;)
             .attr(&quot;transform&quot;, &quot;translate(&quot;+ this.MARGIN.LEFT +&quot;,&quot; + this.SVG_HEIGHT + &quot;)&quot;)
             .call(d3.axisBottom(this.xScale));
          this.yScale = d3.scaleLinear()
              .range([this.CHART_HEIGHT , 0])
              .domain([d3.min(this.charts2, function(d) { return parseFloat(d.axisY); }), d3.max(this.charts2, function(d) { return parseFloat(d.axisY); })*1.2])
              .nice();
        }
      }

      function chartData(column) {
        const data = [];
        if (column?.histogram) {
          for (let i = 0; i&lt;column.histogram.bins.length; i++) {
            data.push({
              axisY: column.histogram.counts[i] || 0,
              axisX: column.histogram.bins[i] || 0,
            });
          }
        } else {
            $(document).ready(() =&gt;
              $(&quot;.desktop-content&quot;).html(`
                &lt;p style=&quot;height: ${$(window).height()}px&quot; class=&quot;error-message&quot;&gt;
                  Something went wrong. Please try again.
                &lt;/p&gt;
              `)
            )
          }

        return data
      }

      function verticalLine(column) {
        const line_data = [];
        if (column?.vertical_line) {
            line_data.push({
              axisX: column?.vertical_line || 0,
            });

        }

        return line_data
      }

      function generateDoubleHistogramChart(targetData, referenceData) {
        let histogramData = [],
            overlappedHistogramData = [];
        let yFormat;

        histogramData = chartData(targetData)
        overlappedHistogramData = chartData(referenceData)
        lineData = verticalLine(targetData)

        const sizes = new GenerateChartParams($(window).height()-80, $(window).width(), histogramData, overlappedHistogramData)
        const {
          MARGIN,
          SVG_WIDTH,
          SVG_HEIGHT,
          CHART_WIDTH,
          CHART_HEIGHT,
          svgEl,
          maxYValue,
          minYValue,
          xScale,
          yScale
        } = sizes

        const rectColors = [&quot;#44C0E7&quot;, &quot;#F5843C&quot;]
        const yAxis = d3.axisLeft(yScale).ticks(SVG_HEIGHT / 40);

        svgEl.append(&quot;g&quot;)
          .attr(&quot;transform&quot;, `translate(${MARGIN.LEFT}, ${MARGIN.BOTTOM})`)
          .call(yAxis)
          .call(g =&gt; g.select(&quot;.domain&quot;).remove())
          .call(g =&gt; g.selectAll(&quot;.tick line&quot;)
              .attr(&quot;x2&quot;, CHART_WIDTH)
              .attr(&quot;stroke-opacity&quot;, 0.1))
          .call(g =&gt; g.append(&quot;text&quot;)
              .attr(&quot;x&quot;, -MARGIN.LEFT)
              .attr(&quot;y&quot;, 10)
              .attr(&quot;fill&quot;, &quot;currentColor&quot;)
              .attr(&quot;text-anchor&quot;, &quot;start&quot;))

        svgEl.append(&quot;line&quot;)
          .attr(&quot;transform&quot;, `translate(${MARGIN.LEFT}, ${MARGIN.BOTTOM})`)
          .data(lineData)
          .attr(&quot;x1&quot;, (d) =&gt; xScale(d.axisX))
          .attr(&quot;y1&quot;, MARGIN.TOP + MARGIN.TOP)
          .attr(&quot;x2&quot;, (d) =&gt; xScale(d.axisX))
          .attr(&quot;y2&quot;, CHART_HEIGHT + MARGIN.TOP)
          .style(&quot;stroke-width&quot;, 2)
          .style(&quot;stroke&quot;, &quot;#44C0E7&quot;)
          .style(&quot;stroke-dasharray&quot;, (3,3))
          .style(&quot;fill&quot;, &quot;none&quot;);

        svgEl.append(&quot;text&quot;)
          .attr(&quot;transform&quot;, &quot;rotate(-90)&quot;)
          .data(lineData)
          .attr(&quot;y&quot;, (d) =&gt; xScale(d.axisX) + MARGIN.LEFT)
          .attr(&quot;x&quot;, 0 - (SVG_HEIGHT / 2))
          .attr(&quot;dy&quot;, &quot;1em&quot;)
          .style(&quot;text-anchor&quot;, &quot;middle&quot;)
          .text(&quot;single value&quot;)
          .style(&quot;font-size&quot;, &quot;15&quot;)
          .style(&quot;opacity&quot;, &quot;0.6&quot;)

        svgEl.append(&quot;text&quot;)
          .attr(&quot;transform&quot;,
                &quot;translate(&quot; + (CHART_WIDTH/2) + &quot; ,&quot; +
                               (CHART_HEIGHT + MARGIN.TOP + 75) + &quot;)&quot;)
          .style(&quot;text-anchor&quot;, &quot;middle&quot;)
          .text(&quot;Values&quot;)
          .style(&quot;font-size&quot;, &quot;15&quot;)
          .style(&quot;opacity&quot;, &quot;0.6&quot;)

        svgEl.append(&quot;text&quot;)
          .attr(&quot;transform&quot;, &quot;rotate(-90)&quot;)
          .attr(&quot;y&quot;, 0)
          .attr(&quot;x&quot;, 0 - (SVG_HEIGHT / 2))
          .attr(&quot;dy&quot;, &quot;1em&quot;)
          .style(&quot;text-anchor&quot;, &quot;middle&quot;)
          .text(&quot;Counts&quot;)
          .style(&quot;font-size&quot;, &quot;15&quot;)
          .style(&quot;opacity&quot;, &quot;0.6&quot;)

          const gChart = svgEl.append(&quot;g&quot;);
          gChart
          .attr(&quot;transform&quot;, &quot;translate(&quot;+ MARGIN.LEFT +&quot;,0)&quot;)
          .selectAll(&quot;.bar&quot;)
          .data(histogramData)
          .enter()
          .append(&quot;rect&quot;)
          .style(&quot;stroke&quot;, &quot;#021826&quot;)
          .classed(&quot;bar&quot;, true)
          .attr(&quot;width&quot;, function(d) { return xScale(histogramData[1]?.axisX)-xScale(histogramData[0]?.axisX); })
          .attr(&quot;height&quot;, (d) =&gt; CHART_HEIGHT - yScale(d.axisY))
          .attr(&quot;x&quot;, 1)
          .attr(&quot;transform&quot;, function(d) { return &quot;translate(&quot; + xScale(d.axisX) + &quot;,&quot; + 0  +  &quot;)&quot;; })
          .attr(&quot;y&quot;, (d) =&gt; yScale(d.axisY) + MARGIN.TOP + MARGIN.BOTTOM)
          .attr(&quot;fill&quot;, rectColors[0])
          .style(&quot;opacity&quot;,&quot;0.6&quot;)

          const gChart1 = svgEl.append(&quot;g&quot;);
          gChart1
          .attr(&quot;transform&quot;, &quot;translate(&quot;+ MARGIN.LEFT +&quot;,0)&quot;)
          .selectAll(&quot;.bar&quot;)
          .data(overlappedHistogramData)
          .enter()
          .append(&quot;rect&quot;)
          .style(&quot;stroke&quot;, &quot;#021826&quot;)
          .classed(&quot;bar&quot;, true)
          .attr(&quot;width&quot;, function(d) { return xScale(overlappedHistogramData[1]?.axisX)-xScale(overlappedHistogramData[0]?.axisX); })
          .attr(&quot;height&quot;, (d) =&gt; CHART_HEIGHT - yScale(d.axisY))
          .attr(&quot;x&quot;, 1)
          .attr(&quot;transform&quot;, function(d) { return &quot;translate(&quot; + xScale(d.axisX) + &quot;,&quot; + 0  +  &quot;)&quot;; })
          .attr(&quot;y&quot;, (d) =&gt; yScale(d.axisY) + MARGIN.TOP + MARGIN.BOTTOM)
          .attr(&quot;fill&quot;, rectColors[1])
          .style(&quot;opacity&quot;,&quot;0.6&quot;)

        return svgEl._groups[0][0].outerHTML;
      }

      const profileFromCSVfile = {&quot;sepal length (cm)&quot;: {&quot;histogram&quot;: {&quot;start&quot;: 4.3, &quot;end&quot;: 7.90000079, &quot;width&quot;: 0, &quot;counts&quot;: [4, 1, 4, 2, 11, 10, 9, 4, 1, 13, 6, 8, 7, 3, 12, 4, 9, 7, 5, 10, 3, 4, 1, 1, 4, 1, 0, 1, 4, 1], &quot;max&quot;: 7.9, &quot;min&quot;: 4.3, &quot;bins&quot;: [4.3, 4.420000026333333, 4.540000052666667, 4.660000079, 4.780000105333333, 4.900000131666666, 5.020000158, 5.140000184333333, 5.260000210666666, 5.380000237, 5.500000263333334, 5.620000289666667, 5.740000316, 5.860000342333334, 5.9800003686666665, 6.100000395, 6.220000421333333, 6.340000447666666, 6.460000474, 6.580000500333334, 6.700000526666667, 6.820000553, 6.940000579333333, 7.060000605666667, 7.1800006320000005, 7.3000006583333334, 7.420000684666666, 7.540000711, 7.660000737333333, 7.780000763666667, 7.90000079], &quot;n&quot;: 150}}}

      Handlebars.registerHelper(&quot;getDoubleHistogramChart&quot;,(column,key) =&gt; {
          const columnKey = key.data.key
        try {
          if (profileFromCSVfile) {
          return  generateDoubleHistogramChart (
              column,
              profileFromCSVfile[columnKey]
            )
          }
        } catch (err) {
          $(document).ready(() =&gt;
            $(&quot;.desktop-content&quot;).html(`
              &lt;p style=&quot;height: ${$(window).height()}px&quot; class=&quot;error-message&quot;&gt;
                Something went wrong. Please try again.
              &lt;/p&gt;
            `)
          )
        }
      });
    }

    function initWebsiteScripts() {
      $(&quot;.svg-container&quot;).css(&quot;height&quot;, $(window).height() - 32)
    }

    function initHandlebarsTemplate() {
      // Replace this context with JSON from .py file
      const context = {&quot;sepal length (cm)&quot;: {&quot;histogram&quot;: {&quot;start&quot;: 4.3, &quot;end&quot;: 7.90000079, &quot;width&quot;: 0, &quot;counts&quot;: [4, 1, 4, 2, 11, 10, 9, 4, 1, 13, 6, 8, 7, 3, 12, 4, 9, 7, 5, 10, 3, 4, 1, 1, 4, 1, 0, 1, 4, 1], &quot;max&quot;: 7.9, &quot;min&quot;: 4.3, &quot;bins&quot;: [4.3, 4.420000026333333, 4.540000052666667, 4.660000079, 4.780000105333333, 4.900000131666666, 5.020000158, 5.140000184333333, 5.260000210666666, 5.380000237, 5.500000263333334, 5.620000289666667, 5.740000316, 5.860000342333334, 5.9800003686666665, 6.100000395, 6.220000421333333, 6.340000447666666, 6.460000474, 6.580000500333334, 6.700000526666667, 6.820000553, 6.940000579333333, 7.060000605666667, 7.1800006320000005, 7.3000006583333334, 7.420000684666666, 7.540000711, 7.660000737333333, 7.780000763666667, 7.90000079], &quot;n&quot;: 150}}};
      // Config handlebars and pass data to HBS template
      const source = document.getElementById(&quot;entry-template&quot;).innerHTML;
      const template = Handlebars.compile(source);
      const html = template(context);
      const target = document.getElementById(&quot;generated-html&quot;);
      target.innerHTML = html;
    }

    // Invoke functions -- keep in mind invokation order
    registerHandlebarHelperFunctions();
    initHandlebarsTemplate();
    initWebsiteScripts();
  &lt;/script&gt;
&lt;/html&gt;
" width=100% height=300px
        frameBorder=0></iframe><br><div></div><iframe srcdoc="&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
  &lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot; /&gt;
    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot; /&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot; /&gt;
    &lt;meta name=&quot;description&quot; content=&quot;&quot; /&gt;
    &lt;meta name=&quot;author&quot; content=&quot;&quot; /&gt;

    &lt;title&gt;Profile Visualizer | whylogs&lt;/title&gt;

    &lt;link rel=&quot;icon&quot; href=&quot;images/whylabs-favicon.png&quot; type=&quot;image/png&quot; sizes=&quot;16x16&quot; /&gt;
    &lt;link rel=&quot;preconnect&quot; href=&quot;https://fonts.googleapis.com&quot; /&gt;
    &lt;link rel=&quot;preconnect&quot; href=&quot;https://fonts.gstatic.com&quot; crossorigin /&gt;
    &lt;link href=&quot;https://fonts.googleapis.com/css2?family=Asap:wght@400;500;600;700&amp;display=swap&quot; rel=&quot;stylesheet&quot; /&gt;
    &lt;link rel=&quot;preconnect&quot; href=&quot;https://fonts.gstatic.com&quot; /&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css&quot; /&gt;

    &lt;script
      src=&quot;https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.7.7/handlebars.min.js&quot;
      integrity=&quot;sha512-RNLkV3d+aLtfcpEyFG8jRbnWHxUqVZozacROI4J2F1sTaDqo1dPQYs01OMi1t1w9Y2FdbSCDSQ2ZVdAC8bzgAg==&quot;
      crossorigin=&quot;anonymous&quot;
      referrerpolicy=&quot;no-referrer&quot;
    &gt;&lt;/script&gt;

    &lt;style type=&quot;text/css&quot;&gt;

      :root {
        /** Branded colors */
        --brandSecondary900: #4f595b;
        --secondaryLight1000: #313b3d;
        /** Purpose colors */
        --tealBackground: #eaf2f3;
      }

      /* RESET STYLE */
      *,
      *::after,
      *::before {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        overflow-y: hidden;
      }

      /* Screen on smaller screens */
      .no-responsive {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        z-index: 1031;
        width: 100vw;
        height: 100vh;
        background-color: var(--tealBackground);
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .desktop-content {
        display: flex;
        flex-direction: column;
      }

      .no-responsive__content {
        max-width: 600px;
        width: 100%;
        padding: 0 24px;
      }

      .no-responsive__title {
        font-size: 96px;
        font-weight: 300;
        color: var(--brandSecondary900);
        line-height: 1.167;
      }

      .no-responsive__text {
        margin: 0;
        font-size: 16px;
        font-weight: 400;
        color: var(--brandSecondary900);
        line-height: 1.5;
      }

      .svg-container {
        display: inline-block;
        position: relative;
        width: 100%;
        vertical-align: top;
        overflow: hidden;
      }

      .svg-content-responsive {
        display: inline-block;
        position: absolute;
        left: 0;
      }

      .circle-color {
       display: inline-block;
       padding: 5px;
       border-radius: 50px;
     }

     .colors-for-distingushing-charts {
       padding-right: 10px;
     }

     .display-flex{
       display: flex;
     }

     .align-items-flex-end {
       align-items: flex-end;
     }

     .chart-box-title {
       width: 88%;
       justify-content: space-between;
       margin: 10px;
       margin-top: 15px;
       bottom: 0;
     }

     .chart-box-title p{
       margin-bottom: 0;
       font-family: Asap;
       font-weight: bold;
       font-size: 18px;
       line-height: 16px;
       color: #4F595B;
     }

    .bar {
      font: 10px sans-serif;
    }

    .bar path,
    .bar line {
      fill: none;
      stroke: #000;
      shape-rendering: crispEdges;
    }

    .error-message {
      display: flex;
      justify-content: center;
      align-items: center;
      color: rgb(255, 114, 71);
      font-size: 30px;
      font-weight: 900;
    }

     @media screen and (min-width: 500px) {
       .desktop-content {
         display: block;
       }
       .no-responsive {
         display: none;
       }
     }
    &lt;/style&gt;
  &lt;/head&gt;

  &lt;body id=&quot;generated-html&quot;&gt;&lt;/body&gt;
  &lt;script id=&quot;entry-template&quot; type=&quot;text/x-handlebars-template&quot;&gt;
    
      &lt;div class=&quot;desktop-content&quot;&gt;
{{#each this}}              &lt;div class=&quot;chart-box&quot; id=&quot;chart-box&quot;&gt;
                &lt;div class=&quot;chart-box-title display-flex&quot;&gt;
                  &lt;p&gt;{{@key}}&lt;/p&gt;
                  &lt;div class=&quot;display-flex&quot;&gt;
                    &lt;div class=&quot;colors-for-distingushing-charts&quot;&gt;
                      &lt;div class=&quot;circle-color&quot; style=&quot;background: #44C0E7;&quot;&gt;&lt;/div&gt;
                      &lt;text alignment-baseline=&quot;middle&quot; style=&quot;font-size: 15px;&quot;&gt;Target&lt;/text&gt;
                    &lt;/div&gt;
                    &lt;div class=&quot;colors-for-distingushing-charts&quot;&gt;
                      &lt;div class=&quot;circle-color&quot; style=&quot;background: #F5843C&quot;&gt;&lt;/div&gt;
                      &lt;text alignment-baseline=&quot;middle&quot; style=&quot;font-size: 15px;&quot;&gt;Reference&lt;/text&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;&lt;/div&gt;
                &lt;div class=&quot;svg-container&quot;&gt;{{{getDoubleHistogramChart this}}}&lt;/div&gt;
              &lt;/div&gt;
{{/each}}      &lt;/div&gt;
      &lt;div class=&quot;no-responsive&quot;&gt;
        &lt;div class=&quot;no-responsive__content&quot;&gt;
          &lt;h1 class=&quot;no-responsive__title&quot;&gt;Hold on! :)&lt;/h1&gt;
          &lt;p class=&quot;no-responsive__text&quot;&gt;
            It looks like your current screen size or device is not yet supported by the WhyLabs Sandbox. The Sandbox is
            best experienced on a desktop computer. Please try maximizing this window or switching to another device. We
            are working on adding support for a larger variety of devices.
          &lt;/p&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    
  &lt;/script&gt;

  &lt;script src=&quot;https://code.jquery.com/jquery-3.6.0.min.js&quot; integrity=&quot;sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=&quot; crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt;

  &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/d3/6.7.0/d3.min.js&quot; integrity=&quot;sha512-cd6CHE+XWDQ33ElJqsi0MdNte3S+bQY819f7p3NUHgwQQLXSKjE4cPZTeGNI+vaxZynk1wVU3hoHmow3m089wA==&quot; crossorigin=&quot;anonymous&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/script&gt;

  &lt;script&gt;
    function registerHandlebarHelperFunctions() {
      //helper fun

      class GenerateChartParams {
        constructor(height, width, targetData, referenceData, bottomMargin=30, topMargin=5) {
          this.MARGIN = {
            TOP: topMargin,
            RIGHT: 5,
            BOTTOM: bottomMargin,
            LEFT: 55,
          };
          this.SVG_WIDTH = width;
          this.SVG_HEIGHT = height;
          this.CHART_WIDTH = this.SVG_WIDTH - this.MARGIN.LEFT - this.MARGIN.RIGHT;
          this.CHART_HEIGHT = this.SVG_HEIGHT - this.MARGIN.TOP - this.MARGIN.BOTTOM;
          this.svgEl = d3.create(&quot;svg&quot;)
             .attr(&quot;preserveAspectRatio&quot;, &quot;xMinYMin meet&quot;)
             .attr(&quot;viewBox&quot;, `0 0 ${$(window).width()+100} ${$(window).height()-30}`)
             .classed(&quot;svg-content-responsive&quot;, true)
          this.maxYValue = d3.max(targetData, (d) =&gt; Math.abs(d.axisY));
          this.minYValue = d3.min(targetData, (d) =&gt; Math.abs(d.axisY));
          const mergedReferenceData = referenceData.map(({axisX, axisY}) =&gt; {
            return {axisX, axisY}
          })
          const mergedTargetedData = targetData.map(({axisX, axisY}) =&gt; {
            return {axisX, axisY}
          })

          this.charts2 = mergedReferenceData.concat(mergedTargetedData)
          this.charts2 = this.charts2.sort(function(a, b) { return a - b; });

          this.targetBinWidth = targetData[1]?.axisX - targetData[0]?.axisX
          this.referenceBinWidth = referenceData[1]?.axisX - referenceData[0]?.axisX
          this.maxTargetXValue = d3.max(targetData, (d) =&gt; d.axisX);

          this.maxReferenceXValue = d3.max(referenceData, (d) =&gt; d.axisX);

          this.xScale = d3
              .scaleLinear()
         .domain([d3.min(this.charts2, function(d) { return parseFloat(d.axisX); }),(this.maxTargetXValue+this.targetBinWidth &gt;= this.maxReferenceXValue+this.referenceBinWidth) ? this.maxTargetXValue+this.targetBinWidth:this.maxReferenceXValue+this.referenceBinWidth])
         .range([0, this.CHART_WIDTH ]);

         this.svgEl.append(&quot;g&quot;)
             .attr(&quot;transform&quot;, &quot;translate(&quot;+ this.MARGIN.LEFT +&quot;,&quot; + this.SVG_HEIGHT + &quot;)&quot;)
             .call(d3.axisBottom(this.xScale));
          this.yScale = d3.scaleLinear()
              .range([this.CHART_HEIGHT , 0])
              .domain([d3.min(this.charts2, function(d) { return parseFloat(d.axisY); }), d3.max(this.charts2, function(d) { return parseFloat(d.axisY); })*1.2])
              .nice();
        }
      }

      function chartData(column) {
        const data = [];
        if (column?.histogram) {
          for (let i = 0; i&lt;column.histogram.bins.length; i++) {
            data.push({
              axisY: column.histogram.counts[i] || 0,
              axisX: column.histogram.bins[i] || 0,
            });
          }
        } else {
            $(document).ready(() =&gt;
              $(&quot;.desktop-content&quot;).html(`
                &lt;p style=&quot;height: ${$(window).height()}px&quot; class=&quot;error-message&quot;&gt;
                  Something went wrong. Please try again.
                &lt;/p&gt;
              `)
            )
          }

        return data
      }

      function verticalLine(column) {
        const line_data = [];
        if (column?.vertical_line) {
            line_data.push({
              axisX: column?.vertical_line || 0,
            });

        }

        return line_data
      }

      function generateDoubleHistogramChart(targetData, referenceData) {
        let histogramData = [],
            overlappedHistogramData = [];
        let yFormat;

        histogramData = chartData(targetData)
        overlappedHistogramData = chartData(referenceData)
        lineData = verticalLine(targetData)

        const sizes = new GenerateChartParams($(window).height()-80, $(window).width(), histogramData, overlappedHistogramData)
        const {
          MARGIN,
          SVG_WIDTH,
          SVG_HEIGHT,
          CHART_WIDTH,
          CHART_HEIGHT,
          svgEl,
          maxYValue,
          minYValue,
          xScale,
          yScale
        } = sizes

        const rectColors = [&quot;#44C0E7&quot;, &quot;#F5843C&quot;]
        const yAxis = d3.axisLeft(yScale).ticks(SVG_HEIGHT / 40);

        svgEl.append(&quot;g&quot;)
          .attr(&quot;transform&quot;, `translate(${MARGIN.LEFT}, ${MARGIN.BOTTOM})`)
          .call(yAxis)
          .call(g =&gt; g.select(&quot;.domain&quot;).remove())
          .call(g =&gt; g.selectAll(&quot;.tick line&quot;)
              .attr(&quot;x2&quot;, CHART_WIDTH)
              .attr(&quot;stroke-opacity&quot;, 0.1))
          .call(g =&gt; g.append(&quot;text&quot;)
              .attr(&quot;x&quot;, -MARGIN.LEFT)
              .attr(&quot;y&quot;, 10)
              .attr(&quot;fill&quot;, &quot;currentColor&quot;)
              .attr(&quot;text-anchor&quot;, &quot;start&quot;))

        svgEl.append(&quot;line&quot;)
          .attr(&quot;transform&quot;, `translate(${MARGIN.LEFT}, ${MARGIN.BOTTOM})`)
          .data(lineData)
          .attr(&quot;x1&quot;, (d) =&gt; xScale(d.axisX))
          .attr(&quot;y1&quot;, MARGIN.TOP + MARGIN.TOP)
          .attr(&quot;x2&quot;, (d) =&gt; xScale(d.axisX))
          .attr(&quot;y2&quot;, CHART_HEIGHT + MARGIN.TOP)
          .style(&quot;stroke-width&quot;, 2)
          .style(&quot;stroke&quot;, &quot;#44C0E7&quot;)
          .style(&quot;stroke-dasharray&quot;, (3,3))
          .style(&quot;fill&quot;, &quot;none&quot;);

        svgEl.append(&quot;text&quot;)
          .attr(&quot;transform&quot;, &quot;rotate(-90)&quot;)
          .data(lineData)
          .attr(&quot;y&quot;, (d) =&gt; xScale(d.axisX) + MARGIN.LEFT)
          .attr(&quot;x&quot;, 0 - (SVG_HEIGHT / 2))
          .attr(&quot;dy&quot;, &quot;1em&quot;)
          .style(&quot;text-anchor&quot;, &quot;middle&quot;)
          .text(&quot;single value&quot;)
          .style(&quot;font-size&quot;, &quot;15&quot;)
          .style(&quot;opacity&quot;, &quot;0.6&quot;)

        svgEl.append(&quot;text&quot;)
          .attr(&quot;transform&quot;,
                &quot;translate(&quot; + (CHART_WIDTH/2) + &quot; ,&quot; +
                               (CHART_HEIGHT + MARGIN.TOP + 75) + &quot;)&quot;)
          .style(&quot;text-anchor&quot;, &quot;middle&quot;)
          .text(&quot;Values&quot;)
          .style(&quot;font-size&quot;, &quot;15&quot;)
          .style(&quot;opacity&quot;, &quot;0.6&quot;)

        svgEl.append(&quot;text&quot;)
          .attr(&quot;transform&quot;, &quot;rotate(-90)&quot;)
          .attr(&quot;y&quot;, 0)
          .attr(&quot;x&quot;, 0 - (SVG_HEIGHT / 2))
          .attr(&quot;dy&quot;, &quot;1em&quot;)
          .style(&quot;text-anchor&quot;, &quot;middle&quot;)
          .text(&quot;Counts&quot;)
          .style(&quot;font-size&quot;, &quot;15&quot;)
          .style(&quot;opacity&quot;, &quot;0.6&quot;)

          const gChart = svgEl.append(&quot;g&quot;);
          gChart
          .attr(&quot;transform&quot;, &quot;translate(&quot;+ MARGIN.LEFT +&quot;,0)&quot;)
          .selectAll(&quot;.bar&quot;)
          .data(histogramData)
          .enter()
          .append(&quot;rect&quot;)
          .style(&quot;stroke&quot;, &quot;#021826&quot;)
          .classed(&quot;bar&quot;, true)
          .attr(&quot;width&quot;, function(d) { return xScale(histogramData[1]?.axisX)-xScale(histogramData[0]?.axisX); })
          .attr(&quot;height&quot;, (d) =&gt; CHART_HEIGHT - yScale(d.axisY))
          .attr(&quot;x&quot;, 1)
          .attr(&quot;transform&quot;, function(d) { return &quot;translate(&quot; + xScale(d.axisX) + &quot;,&quot; + 0  +  &quot;)&quot;; })
          .attr(&quot;y&quot;, (d) =&gt; yScale(d.axisY) + MARGIN.TOP + MARGIN.BOTTOM)
          .attr(&quot;fill&quot;, rectColors[0])
          .style(&quot;opacity&quot;,&quot;0.6&quot;)

          const gChart1 = svgEl.append(&quot;g&quot;);
          gChart1
          .attr(&quot;transform&quot;, &quot;translate(&quot;+ MARGIN.LEFT +&quot;,0)&quot;)
          .selectAll(&quot;.bar&quot;)
          .data(overlappedHistogramData)
          .enter()
          .append(&quot;rect&quot;)
          .style(&quot;stroke&quot;, &quot;#021826&quot;)
          .classed(&quot;bar&quot;, true)
          .attr(&quot;width&quot;, function(d) { return xScale(overlappedHistogramData[1]?.axisX)-xScale(overlappedHistogramData[0]?.axisX); })
          .attr(&quot;height&quot;, (d) =&gt; CHART_HEIGHT - yScale(d.axisY))
          .attr(&quot;x&quot;, 1)
          .attr(&quot;transform&quot;, function(d) { return &quot;translate(&quot; + xScale(d.axisX) + &quot;,&quot; + 0  +  &quot;)&quot;; })
          .attr(&quot;y&quot;, (d) =&gt; yScale(d.axisY) + MARGIN.TOP + MARGIN.BOTTOM)
          .attr(&quot;fill&quot;, rectColors[1])
          .style(&quot;opacity&quot;,&quot;0.6&quot;)

        return svgEl._groups[0][0].outerHTML;
      }

      const profileFromCSVfile = {&quot;sepal width (cm)&quot;: {&quot;histogram&quot;: {&quot;start&quot;: 2.0, &quot;end&quot;: 4.40000044, &quot;width&quot;: 0, &quot;counts&quot;: [1, 0, 3, 4, 3, 0, 8, 5, 9, 14, 0, 10, 26, 11, 13, 0, 6, 12, 6, 4, 0, 3, 6, 2, 1, 0, 1, 1, 0, 1], &quot;max&quot;: 4.4, &quot;min&quot;: 2.0, &quot;bins&quot;: [2.0, 2.0800000146666666, 2.1600000293333332, 2.240000044, 2.3200000586666665, 2.4000000733333335, 2.480000088, 2.5600001026666668, 2.6400001173333334, 2.720000132, 2.8000001466666666, 2.8800001613333333, 2.9600001760000003, 3.0400001906666665, 3.1200002053333336, 3.20000022, 3.280000234666667, 3.3600002493333334, 3.440000264, 3.520000278666667, 3.6000002933333333, 3.6800003080000003, 3.760000322666667, 3.8400003373333336, 3.920000352, 4.000000366666667, 4.080000381333333, 4.160000396, 4.240000410666667, 4.320000425333333, 4.40000044], &quot;n&quot;: 150}}}

      Handlebars.registerHelper(&quot;getDoubleHistogramChart&quot;,(column,key) =&gt; {
          const columnKey = key.data.key
        try {
          if (profileFromCSVfile) {
          return  generateDoubleHistogramChart (
              column,
              profileFromCSVfile[columnKey]
            )
          }
        } catch (err) {
          $(document).ready(() =&gt;
            $(&quot;.desktop-content&quot;).html(`
              &lt;p style=&quot;height: ${$(window).height()}px&quot; class=&quot;error-message&quot;&gt;
                Something went wrong. Please try again.
              &lt;/p&gt;
            `)
          )
        }
      });
    }

    function initWebsiteScripts() {
      $(&quot;.svg-container&quot;).css(&quot;height&quot;, $(window).height() - 32)
    }

    function initHandlebarsTemplate() {
      // Replace this context with JSON from .py file
      const context = {&quot;sepal width (cm)&quot;: {&quot;histogram&quot;: {&quot;start&quot;: 2.0, &quot;end&quot;: 4.40000044, &quot;width&quot;: 0, &quot;counts&quot;: [1, 0, 3, 4, 3, 0, 8, 5, 9, 14, 0, 10, 26, 11, 13, 0, 6, 12, 6, 4, 0, 3, 6, 2, 1, 0, 1, 1, 0, 1], &quot;max&quot;: 4.4, &quot;min&quot;: 2.0, &quot;bins&quot;: [2.0, 2.0800000146666666, 2.1600000293333332, 2.240000044, 2.3200000586666665, 2.4000000733333335, 2.480000088, 2.5600001026666668, 2.6400001173333334, 2.720000132, 2.8000001466666666, 2.8800001613333333, 2.9600001760000003, 3.0400001906666665, 3.1200002053333336, 3.20000022, 3.280000234666667, 3.3600002493333334, 3.440000264, 3.520000278666667, 3.6000002933333333, 3.6800003080000003, 3.760000322666667, 3.8400003373333336, 3.920000352, 4.000000366666667, 4.080000381333333, 4.160000396, 4.240000410666667, 4.320000425333333, 4.40000044], &quot;n&quot;: 150}}};
      // Config handlebars and pass data to HBS template
      const source = document.getElementById(&quot;entry-template&quot;).innerHTML;
      const template = Handlebars.compile(source);
      const html = template(context);
      const target = document.getElementById(&quot;generated-html&quot;);
      target.innerHTML = html;
    }

    // Invoke functions -- keep in mind invokation order
    registerHandlebarHelperFunctions();
    initHandlebarsTemplate();
    initWebsiteScripts();
  &lt;/script&gt;
&lt;/html&gt;
" width=100% height=300px
        frameBorder=0></iframe><br><div></div><iframe srcdoc="&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
  &lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot; /&gt;
    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot; /&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot; /&gt;
    &lt;meta name=&quot;description&quot; content=&quot;&quot; /&gt;
    &lt;meta name=&quot;author&quot; content=&quot;&quot; /&gt;

    &lt;title&gt;Profile Visualizer | whylogs&lt;/title&gt;

    &lt;link rel=&quot;icon&quot; href=&quot;images/whylabs-favicon.png&quot; type=&quot;image/png&quot; sizes=&quot;16x16&quot; /&gt;
    &lt;link rel=&quot;preconnect&quot; href=&quot;https://fonts.googleapis.com&quot; /&gt;
    &lt;link rel=&quot;preconnect&quot; href=&quot;https://fonts.gstatic.com&quot; crossorigin /&gt;
    &lt;link href=&quot;https://fonts.googleapis.com/css2?family=Asap:wght@400;500;600;700&amp;display=swap&quot; rel=&quot;stylesheet&quot; /&gt;
    &lt;link rel=&quot;preconnect&quot; href=&quot;https://fonts.gstatic.com&quot; /&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css&quot; /&gt;

    &lt;script
      src=&quot;https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.7.7/handlebars.min.js&quot;
      integrity=&quot;sha512-RNLkV3d+aLtfcpEyFG8jRbnWHxUqVZozacROI4J2F1sTaDqo1dPQYs01OMi1t1w9Y2FdbSCDSQ2ZVdAC8bzgAg==&quot;
      crossorigin=&quot;anonymous&quot;
      referrerpolicy=&quot;no-referrer&quot;
    &gt;&lt;/script&gt;

    &lt;style type=&quot;text/css&quot;&gt;

      :root {
        /** Branded colors */
        --brandSecondary900: #4f595b;
        --secondaryLight1000: #313b3d;
        /** Purpose colors */
        --tealBackground: #eaf2f3;
      }

      /* RESET STYLE */
      *,
      *::after,
      *::before {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        overflow-y: hidden;
      }

      /* Screen on smaller screens */
      .no-responsive {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        z-index: 1031;
        width: 100vw;
        height: 100vh;
        background-color: var(--tealBackground);
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .desktop-content {
        display: flex;
        flex-direction: column;
      }

      .no-responsive__content {
        max-width: 600px;
        width: 100%;
        padding: 0 24px;
      }

      .no-responsive__title {
        font-size: 96px;
        font-weight: 300;
        color: var(--brandSecondary900);
        line-height: 1.167;
      }

      .no-responsive__text {
        margin: 0;
        font-size: 16px;
        font-weight: 400;
        color: var(--brandSecondary900);
        line-height: 1.5;
      }

      .svg-container {
        display: inline-block;
        position: relative;
        width: 100%;
        vertical-align: top;
        overflow: hidden;
      }

      .svg-content-responsive {
        display: inline-block;
        position: absolute;
        left: 0;
      }

      .circle-color {
       display: inline-block;
       padding: 5px;
       border-radius: 50px;
     }

     .colors-for-distingushing-charts {
       padding-right: 10px;
     }

     .display-flex{
       display: flex;
     }

     .align-items-flex-end {
       align-items: flex-end;
     }

     .chart-box-title {
       width: 88%;
       justify-content: space-between;
       margin: 10px;
       margin-top: 15px;
       bottom: 0;
     }

     .chart-box-title p{
       margin-bottom: 0;
       font-family: Asap;
       font-weight: bold;
       font-size: 18px;
       line-height: 16px;
       color: #4F595B;
     }

    .bar {
      font: 10px sans-serif;
    }

    .bar path,
    .bar line {
      fill: none;
      stroke: #000;
      shape-rendering: crispEdges;
    }

    .error-message {
      display: flex;
      justify-content: center;
      align-items: center;
      color: rgb(255, 114, 71);
      font-size: 30px;
      font-weight: 900;
    }

     @media screen and (min-width: 500px) {
       .desktop-content {
         display: block;
       }
       .no-responsive {
         display: none;
       }
     }
    &lt;/style&gt;
  &lt;/head&gt;

  &lt;body id=&quot;generated-html&quot;&gt;&lt;/body&gt;
  &lt;script id=&quot;entry-template&quot; type=&quot;text/x-handlebars-template&quot;&gt;
    
      &lt;div class=&quot;desktop-content&quot;&gt;
{{#each this}}              &lt;div class=&quot;chart-box&quot; id=&quot;chart-box&quot;&gt;
                &lt;div class=&quot;chart-box-title display-flex&quot;&gt;
                  &lt;p&gt;{{@key}}&lt;/p&gt;
                  &lt;div class=&quot;display-flex&quot;&gt;
                    &lt;div class=&quot;colors-for-distingushing-charts&quot;&gt;
                      &lt;div class=&quot;circle-color&quot; style=&quot;background: #44C0E7;&quot;&gt;&lt;/div&gt;
                      &lt;text alignment-baseline=&quot;middle&quot; style=&quot;font-size: 15px;&quot;&gt;Target&lt;/text&gt;
                    &lt;/div&gt;
                    &lt;div class=&quot;colors-for-distingushing-charts&quot;&gt;
                      &lt;div class=&quot;circle-color&quot; style=&quot;background: #F5843C&quot;&gt;&lt;/div&gt;
                      &lt;text alignment-baseline=&quot;middle&quot; style=&quot;font-size: 15px;&quot;&gt;Reference&lt;/text&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;&lt;/div&gt;
                &lt;div class=&quot;svg-container&quot;&gt;{{{getDoubleHistogramChart this}}}&lt;/div&gt;
              &lt;/div&gt;
{{/each}}      &lt;/div&gt;
      &lt;div class=&quot;no-responsive&quot;&gt;
        &lt;div class=&quot;no-responsive__content&quot;&gt;
          &lt;h1 class=&quot;no-responsive__title&quot;&gt;Hold on! :)&lt;/h1&gt;
          &lt;p class=&quot;no-responsive__text&quot;&gt;
            It looks like your current screen size or device is not yet supported by the WhyLabs Sandbox. The Sandbox is
            best experienced on a desktop computer. Please try maximizing this window or switching to another device. We
            are working on adding support for a larger variety of devices.
          &lt;/p&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    
  &lt;/script&gt;

  &lt;script src=&quot;https://code.jquery.com/jquery-3.6.0.min.js&quot; integrity=&quot;sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=&quot; crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt;

  &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/d3/6.7.0/d3.min.js&quot; integrity=&quot;sha512-cd6CHE+XWDQ33ElJqsi0MdNte3S+bQY819f7p3NUHgwQQLXSKjE4cPZTeGNI+vaxZynk1wVU3hoHmow3m089wA==&quot; crossorigin=&quot;anonymous&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/script&gt;

  &lt;script&gt;
    function registerHandlebarHelperFunctions() {
      //helper fun

      class GenerateChartParams {
        constructor(height, width, targetData, referenceData, bottomMargin=30, topMargin=5) {
          this.MARGIN = {
            TOP: topMargin,
            RIGHT: 5,
            BOTTOM: bottomMargin,
            LEFT: 55,
          };
          this.SVG_WIDTH = width;
          this.SVG_HEIGHT = height;
          this.CHART_WIDTH = this.SVG_WIDTH - this.MARGIN.LEFT - this.MARGIN.RIGHT;
          this.CHART_HEIGHT = this.SVG_HEIGHT - this.MARGIN.TOP - this.MARGIN.BOTTOM;
          this.svgEl = d3.create(&quot;svg&quot;)
             .attr(&quot;preserveAspectRatio&quot;, &quot;xMinYMin meet&quot;)
             .attr(&quot;viewBox&quot;, `0 0 ${$(window).width()+100} ${$(window).height()-30}`)
             .classed(&quot;svg-content-responsive&quot;, true)
          this.maxYValue = d3.max(targetData, (d) =&gt; Math.abs(d.axisY));
          this.minYValue = d3.min(targetData, (d) =&gt; Math.abs(d.axisY));
          const mergedReferenceData = referenceData.map(({axisX, axisY}) =&gt; {
            return {axisX, axisY}
          })
          const mergedTargetedData = targetData.map(({axisX, axisY}) =&gt; {
            return {axisX, axisY}
          })

          this.charts2 = mergedReferenceData.concat(mergedTargetedData)
          this.charts2 = this.charts2.sort(function(a, b) { return a - b; });

          this.targetBinWidth = targetData[1]?.axisX - targetData[0]?.axisX
          this.referenceBinWidth = referenceData[1]?.axisX - referenceData[0]?.axisX
          this.maxTargetXValue = d3.max(targetData, (d) =&gt; d.axisX);

          this.maxReferenceXValue = d3.max(referenceData, (d) =&gt; d.axisX);

          this.xScale = d3
              .scaleLinear()
         .domain([d3.min(this.charts2, function(d) { return parseFloat(d.axisX); }),(this.maxTargetXValue+this.targetBinWidth &gt;= this.maxReferenceXValue+this.referenceBinWidth) ? this.maxTargetXValue+this.targetBinWidth:this.maxReferenceXValue+this.referenceBinWidth])
         .range([0, this.CHART_WIDTH ]);

         this.svgEl.append(&quot;g&quot;)
             .attr(&quot;transform&quot;, &quot;translate(&quot;+ this.MARGIN.LEFT +&quot;,&quot; + this.SVG_HEIGHT + &quot;)&quot;)
             .call(d3.axisBottom(this.xScale));
          this.yScale = d3.scaleLinear()
              .range([this.CHART_HEIGHT , 0])
              .domain([d3.min(this.charts2, function(d) { return parseFloat(d.axisY); }), d3.max(this.charts2, function(d) { return parseFloat(d.axisY); })*1.2])
              .nice();
        }
      }

      function chartData(column) {
        const data = [];
        if (column?.histogram) {
          for (let i = 0; i&lt;column.histogram.bins.length; i++) {
            data.push({
              axisY: column.histogram.counts[i] || 0,
              axisX: column.histogram.bins[i] || 0,
            });
          }
        } else {
            $(document).ready(() =&gt;
              $(&quot;.desktop-content&quot;).html(`
                &lt;p style=&quot;height: ${$(window).height()}px&quot; class=&quot;error-message&quot;&gt;
                  Something went wrong. Please try again.
                &lt;/p&gt;
              `)
            )
          }

        return data
      }

      function verticalLine(column) {
        const line_data = [];
        if (column?.vertical_line) {
            line_data.push({
              axisX: column?.vertical_line || 0,
            });

        }

        return line_data
      }

      function generateDoubleHistogramChart(targetData, referenceData) {
        let histogramData = [],
            overlappedHistogramData = [];
        let yFormat;

        histogramData = chartData(targetData)
        overlappedHistogramData = chartData(referenceData)
        lineData = verticalLine(targetData)

        const sizes = new GenerateChartParams($(window).height()-80, $(window).width(), histogramData, overlappedHistogramData)
        const {
          MARGIN,
          SVG_WIDTH,
          SVG_HEIGHT,
          CHART_WIDTH,
          CHART_HEIGHT,
          svgEl,
          maxYValue,
          minYValue,
          xScale,
          yScale
        } = sizes

        const rectColors = [&quot;#44C0E7&quot;, &quot;#F5843C&quot;]
        const yAxis = d3.axisLeft(yScale).ticks(SVG_HEIGHT / 40);

        svgEl.append(&quot;g&quot;)
          .attr(&quot;transform&quot;, `translate(${MARGIN.LEFT}, ${MARGIN.BOTTOM})`)
          .call(yAxis)
          .call(g =&gt; g.select(&quot;.domain&quot;).remove())
          .call(g =&gt; g.selectAll(&quot;.tick line&quot;)
              .attr(&quot;x2&quot;, CHART_WIDTH)
              .attr(&quot;stroke-opacity&quot;, 0.1))
          .call(g =&gt; g.append(&quot;text&quot;)
              .attr(&quot;x&quot;, -MARGIN.LEFT)
              .attr(&quot;y&quot;, 10)
              .attr(&quot;fill&quot;, &quot;currentColor&quot;)
              .attr(&quot;text-anchor&quot;, &quot;start&quot;))

        svgEl.append(&quot;line&quot;)
          .attr(&quot;transform&quot;, `translate(${MARGIN.LEFT}, ${MARGIN.BOTTOM})`)
          .data(lineData)
          .attr(&quot;x1&quot;, (d) =&gt; xScale(d.axisX))
          .attr(&quot;y1&quot;, MARGIN.TOP + MARGIN.TOP)
          .attr(&quot;x2&quot;, (d) =&gt; xScale(d.axisX))
          .attr(&quot;y2&quot;, CHART_HEIGHT + MARGIN.TOP)
          .style(&quot;stroke-width&quot;, 2)
          .style(&quot;stroke&quot;, &quot;#44C0E7&quot;)
          .style(&quot;stroke-dasharray&quot;, (3,3))
          .style(&quot;fill&quot;, &quot;none&quot;);

        svgEl.append(&quot;text&quot;)
          .attr(&quot;transform&quot;, &quot;rotate(-90)&quot;)
          .data(lineData)
          .attr(&quot;y&quot;, (d) =&gt; xScale(d.axisX) + MARGIN.LEFT)
          .attr(&quot;x&quot;, 0 - (SVG_HEIGHT / 2))
          .attr(&quot;dy&quot;, &quot;1em&quot;)
          .style(&quot;text-anchor&quot;, &quot;middle&quot;)
          .text(&quot;single value&quot;)
          .style(&quot;font-size&quot;, &quot;15&quot;)
          .style(&quot;opacity&quot;, &quot;0.6&quot;)

        svgEl.append(&quot;text&quot;)
          .attr(&quot;transform&quot;,
                &quot;translate(&quot; + (CHART_WIDTH/2) + &quot; ,&quot; +
                               (CHART_HEIGHT + MARGIN.TOP + 75) + &quot;)&quot;)
          .style(&quot;text-anchor&quot;, &quot;middle&quot;)
          .text(&quot;Values&quot;)
          .style(&quot;font-size&quot;, &quot;15&quot;)
          .style(&quot;opacity&quot;, &quot;0.6&quot;)

        svgEl.append(&quot;text&quot;)
          .attr(&quot;transform&quot;, &quot;rotate(-90)&quot;)
          .attr(&quot;y&quot;, 0)
          .attr(&quot;x&quot;, 0 - (SVG_HEIGHT / 2))
          .attr(&quot;dy&quot;, &quot;1em&quot;)
          .style(&quot;text-anchor&quot;, &quot;middle&quot;)
          .text(&quot;Counts&quot;)
          .style(&quot;font-size&quot;, &quot;15&quot;)
          .style(&quot;opacity&quot;, &quot;0.6&quot;)

          const gChart = svgEl.append(&quot;g&quot;);
          gChart
          .attr(&quot;transform&quot;, &quot;translate(&quot;+ MARGIN.LEFT +&quot;,0)&quot;)
          .selectAll(&quot;.bar&quot;)
          .data(histogramData)
          .enter()
          .append(&quot;rect&quot;)
          .style(&quot;stroke&quot;, &quot;#021826&quot;)
          .classed(&quot;bar&quot;, true)
          .attr(&quot;width&quot;, function(d) { return xScale(histogramData[1]?.axisX)-xScale(histogramData[0]?.axisX); })
          .attr(&quot;height&quot;, (d) =&gt; CHART_HEIGHT - yScale(d.axisY))
          .attr(&quot;x&quot;, 1)
          .attr(&quot;transform&quot;, function(d) { return &quot;translate(&quot; + xScale(d.axisX) + &quot;,&quot; + 0  +  &quot;)&quot;; })
          .attr(&quot;y&quot;, (d) =&gt; yScale(d.axisY) + MARGIN.TOP + MARGIN.BOTTOM)
          .attr(&quot;fill&quot;, rectColors[0])
          .style(&quot;opacity&quot;,&quot;0.6&quot;)

          const gChart1 = svgEl.append(&quot;g&quot;);
          gChart1
          .attr(&quot;transform&quot;, &quot;translate(&quot;+ MARGIN.LEFT +&quot;,0)&quot;)
          .selectAll(&quot;.bar&quot;)
          .data(overlappedHistogramData)
          .enter()
          .append(&quot;rect&quot;)
          .style(&quot;stroke&quot;, &quot;#021826&quot;)
          .classed(&quot;bar&quot;, true)
          .attr(&quot;width&quot;, function(d) { return xScale(overlappedHistogramData[1]?.axisX)-xScale(overlappedHistogramData[0]?.axisX); })
          .attr(&quot;height&quot;, (d) =&gt; CHART_HEIGHT - yScale(d.axisY))
          .attr(&quot;x&quot;, 1)
          .attr(&quot;transform&quot;, function(d) { return &quot;translate(&quot; + xScale(d.axisX) + &quot;,&quot; + 0  +  &quot;)&quot;; })
          .attr(&quot;y&quot;, (d) =&gt; yScale(d.axisY) + MARGIN.TOP + MARGIN.BOTTOM)
          .attr(&quot;fill&quot;, rectColors[1])
          .style(&quot;opacity&quot;,&quot;0.6&quot;)

        return svgEl._groups[0][0].outerHTML;
      }

      const profileFromCSVfile = {&quot;petal length (cm)&quot;: {&quot;histogram&quot;: {&quot;start&quot;: 1.0, &quot;end&quot;: 6.900000690000001, &quot;width&quot;: 0, &quot;counts&quot;: [2, 9, 26, 11, 2, 0, 0, 0, 0, 0, 1, 2, 2, 2, 4, 8, 6, 12, 8, 9, 12, 4, 5, 9, 5, 5, 1, 1, 3, 1], &quot;max&quot;: 6.9, &quot;min&quot;: 1.0, &quot;bins&quot;: [1.0, 1.1966666896666667, 1.3933333793333333, 1.5900000690000002, 1.7866667586666667, 1.9833334483333336, 2.1800001380000005, 2.376666827666667, 2.5733335173333334, 2.7700002070000003, 2.966666896666667, 3.1633335863333336, 3.3600002760000005, 3.556666965666667, 3.753333655333334, 3.9500003450000003, 4.146667034666667, 4.343333724333334, 4.5400004140000005, 4.736667103666667, 4.933333793333334, 5.130000483000001, 5.326667172666667, 5.523333862333334, 5.720000552000001, 5.9166672416666675, 6.113333931333334, 6.310000621000001, 6.506667310666668, 6.703334000333334, 6.900000690000001], &quot;n&quot;: 150}}}

      Handlebars.registerHelper(&quot;getDoubleHistogramChart&quot;,(column,key) =&gt; {
          const columnKey = key.data.key
        try {
          if (profileFromCSVfile) {
          return  generateDoubleHistogramChart (
              column,
              profileFromCSVfile[columnKey]
            )
          }
        } catch (err) {
          $(document).ready(() =&gt;
            $(&quot;.desktop-content&quot;).html(`
              &lt;p style=&quot;height: ${$(window).height()}px&quot; class=&quot;error-message&quot;&gt;
                Something went wrong. Please try again.
              &lt;/p&gt;
            `)
          )
        }
      });
    }

    function initWebsiteScripts() {
      $(&quot;.svg-container&quot;).css(&quot;height&quot;, $(window).height() - 32)
    }

    function initHandlebarsTemplate() {
      // Replace this context with JSON from .py file
      const context = {&quot;petal length (cm)&quot;: {&quot;histogram&quot;: {&quot;start&quot;: 1.0, &quot;end&quot;: 6.900000690000001, &quot;width&quot;: 0, &quot;counts&quot;: [2, 9, 26, 11, 2, 0, 0, 0, 0, 0, 1, 2, 2, 2, 4, 8, 6, 12, 8, 9, 12, 4, 5, 9, 5, 5, 1, 1, 3, 1], &quot;max&quot;: 6.9, &quot;min&quot;: 1.0, &quot;bins&quot;: [1.0, 1.1966666896666667, 1.3933333793333333, 1.5900000690000002, 1.7866667586666667, 1.9833334483333336, 2.1800001380000005, 2.376666827666667, 2.5733335173333334, 2.7700002070000003, 2.966666896666667, 3.1633335863333336, 3.3600002760000005, 3.556666965666667, 3.753333655333334, 3.9500003450000003, 4.146667034666667, 4.343333724333334, 4.5400004140000005, 4.736667103666667, 4.933333793333334, 5.130000483000001, 5.326667172666667, 5.523333862333334, 5.720000552000001, 5.9166672416666675, 6.113333931333334, 6.310000621000001, 6.506667310666668, 6.703334000333334, 6.900000690000001], &quot;n&quot;: 150}}};
      // Config handlebars and pass data to HBS template
      const source = document.getElementById(&quot;entry-template&quot;).innerHTML;
      const template = Handlebars.compile(source);
      const html = template(context);
      const target = document.getElementById(&quot;generated-html&quot;);
      target.innerHTML = html;
    }

    // Invoke functions -- keep in mind invokation order
    registerHandlebarHelperFunctions();
    initHandlebarsTemplate();
    initWebsiteScripts();
  &lt;/script&gt;
&lt;/html&gt;
" width=100% height=300px
        frameBorder=0></iframe><br><div></div><iframe srcdoc="&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
  &lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot; /&gt;
    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot; /&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot; /&gt;
    &lt;meta name=&quot;description&quot; content=&quot;&quot; /&gt;
    &lt;meta name=&quot;author&quot; content=&quot;&quot; /&gt;

    &lt;title&gt;Profile Visualizer | whylogs&lt;/title&gt;

    &lt;link rel=&quot;icon&quot; href=&quot;images/whylabs-favicon.png&quot; type=&quot;image/png&quot; sizes=&quot;16x16&quot; /&gt;
    &lt;link rel=&quot;preconnect&quot; href=&quot;https://fonts.googleapis.com&quot; /&gt;
    &lt;link rel=&quot;preconnect&quot; href=&quot;https://fonts.gstatic.com&quot; crossorigin /&gt;
    &lt;link href=&quot;https://fonts.googleapis.com/css2?family=Asap:wght@400;500;600;700&amp;display=swap&quot; rel=&quot;stylesheet&quot; /&gt;
    &lt;link rel=&quot;preconnect&quot; href=&quot;https://fonts.gstatic.com&quot; /&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css&quot; /&gt;

    &lt;script
      src=&quot;https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.7.7/handlebars.min.js&quot;
      integrity=&quot;sha512-RNLkV3d+aLtfcpEyFG8jRbnWHxUqVZozacROI4J2F1sTaDqo1dPQYs01OMi1t1w9Y2FdbSCDSQ2ZVdAC8bzgAg==&quot;
      crossorigin=&quot;anonymous&quot;
      referrerpolicy=&quot;no-referrer&quot;
    &gt;&lt;/script&gt;

    &lt;style type=&quot;text/css&quot;&gt;

      :root {
        /** Branded colors */
        --brandSecondary900: #4f595b;
        --secondaryLight1000: #313b3d;
        /** Purpose colors */
        --tealBackground: #eaf2f3;
      }

      /* RESET STYLE */
      *,
      *::after,
      *::before {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        overflow-y: hidden;
      }

      /* Screen on smaller screens */
      .no-responsive {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        z-index: 1031;
        width: 100vw;
        height: 100vh;
        background-color: var(--tealBackground);
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .desktop-content {
        display: flex;
        flex-direction: column;
      }

      .no-responsive__content {
        max-width: 600px;
        width: 100%;
        padding: 0 24px;
      }

      .no-responsive__title {
        font-size: 96px;
        font-weight: 300;
        color: var(--brandSecondary900);
        line-height: 1.167;
      }

      .no-responsive__text {
        margin: 0;
        font-size: 16px;
        font-weight: 400;
        color: var(--brandSecondary900);
        line-height: 1.5;
      }

      .svg-container {
        display: inline-block;
        position: relative;
        width: 100%;
        vertical-align: top;
        overflow: hidden;
      }

      .svg-content-responsive {
        display: inline-block;
        position: absolute;
        left: 0;
      }

      .circle-color {
       display: inline-block;
       padding: 5px;
       border-radius: 50px;
     }

     .colors-for-distingushing-charts {
       padding-right: 10px;
     }

     .display-flex{
       display: flex;
     }

     .align-items-flex-end {
       align-items: flex-end;
     }

     .chart-box-title {
       width: 88%;
       justify-content: space-between;
       margin: 10px;
       margin-top: 15px;
       bottom: 0;
     }

     .chart-box-title p{
       margin-bottom: 0;
       font-family: Asap;
       font-weight: bold;
       font-size: 18px;
       line-height: 16px;
       color: #4F595B;
     }

    .bar {
      font: 10px sans-serif;
    }

    .bar path,
    .bar line {
      fill: none;
      stroke: #000;
      shape-rendering: crispEdges;
    }

    .error-message {
      display: flex;
      justify-content: center;
      align-items: center;
      color: rgb(255, 114, 71);
      font-size: 30px;
      font-weight: 900;
    }

     @media screen and (min-width: 500px) {
       .desktop-content {
         display: block;
       }
       .no-responsive {
         display: none;
       }
     }
    &lt;/style&gt;
  &lt;/head&gt;

  &lt;body id=&quot;generated-html&quot;&gt;&lt;/body&gt;
  &lt;script id=&quot;entry-template&quot; type=&quot;text/x-handlebars-template&quot;&gt;
    
      &lt;div class=&quot;desktop-content&quot;&gt;
{{#each this}}              &lt;div class=&quot;chart-box&quot; id=&quot;chart-box&quot;&gt;
                &lt;div class=&quot;chart-box-title display-flex&quot;&gt;
                  &lt;p&gt;{{@key}}&lt;/p&gt;
                  &lt;div class=&quot;display-flex&quot;&gt;
                    &lt;div class=&quot;colors-for-distingushing-charts&quot;&gt;
                      &lt;div class=&quot;circle-color&quot; style=&quot;background: #44C0E7;&quot;&gt;&lt;/div&gt;
                      &lt;text alignment-baseline=&quot;middle&quot; style=&quot;font-size: 15px;&quot;&gt;Target&lt;/text&gt;
                    &lt;/div&gt;
                    &lt;div class=&quot;colors-for-distingushing-charts&quot;&gt;
                      &lt;div class=&quot;circle-color&quot; style=&quot;background: #F5843C&quot;&gt;&lt;/div&gt;
                      &lt;text alignment-baseline=&quot;middle&quot; style=&quot;font-size: 15px;&quot;&gt;Reference&lt;/text&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;&lt;/div&gt;
                &lt;div class=&quot;svg-container&quot;&gt;{{{getDoubleHistogramChart this}}}&lt;/div&gt;
              &lt;/div&gt;
{{/each}}      &lt;/div&gt;
      &lt;div class=&quot;no-responsive&quot;&gt;
        &lt;div class=&quot;no-responsive__content&quot;&gt;
          &lt;h1 class=&quot;no-responsive__title&quot;&gt;Hold on! :)&lt;/h1&gt;
          &lt;p class=&quot;no-responsive__text&quot;&gt;
            It looks like your current screen size or device is not yet supported by the WhyLabs Sandbox. The Sandbox is
            best experienced on a desktop computer. Please try maximizing this window or switching to another device. We
            are working on adding support for a larger variety of devices.
          &lt;/p&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    
  &lt;/script&gt;

  &lt;script src=&quot;https://code.jquery.com/jquery-3.6.0.min.js&quot; integrity=&quot;sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=&quot; crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt;

  &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/d3/6.7.0/d3.min.js&quot; integrity=&quot;sha512-cd6CHE+XWDQ33ElJqsi0MdNte3S+bQY819f7p3NUHgwQQLXSKjE4cPZTeGNI+vaxZynk1wVU3hoHmow3m089wA==&quot; crossorigin=&quot;anonymous&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/script&gt;

  &lt;script&gt;
    function registerHandlebarHelperFunctions() {
      //helper fun

      class GenerateChartParams {
        constructor(height, width, targetData, referenceData, bottomMargin=30, topMargin=5) {
          this.MARGIN = {
            TOP: topMargin,
            RIGHT: 5,
            BOTTOM: bottomMargin,
            LEFT: 55,
          };
          this.SVG_WIDTH = width;
          this.SVG_HEIGHT = height;
          this.CHART_WIDTH = this.SVG_WIDTH - this.MARGIN.LEFT - this.MARGIN.RIGHT;
          this.CHART_HEIGHT = this.SVG_HEIGHT - this.MARGIN.TOP - this.MARGIN.BOTTOM;
          this.svgEl = d3.create(&quot;svg&quot;)
             .attr(&quot;preserveAspectRatio&quot;, &quot;xMinYMin meet&quot;)
             .attr(&quot;viewBox&quot;, `0 0 ${$(window).width()+100} ${$(window).height()-30}`)
             .classed(&quot;svg-content-responsive&quot;, true)
          this.maxYValue = d3.max(targetData, (d) =&gt; Math.abs(d.axisY));
          this.minYValue = d3.min(targetData, (d) =&gt; Math.abs(d.axisY));
          const mergedReferenceData = referenceData.map(({axisX, axisY}) =&gt; {
            return {axisX, axisY}
          })
          const mergedTargetedData = targetData.map(({axisX, axisY}) =&gt; {
            return {axisX, axisY}
          })

          this.charts2 = mergedReferenceData.concat(mergedTargetedData)
          this.charts2 = this.charts2.sort(function(a, b) { return a - b; });

          this.targetBinWidth = targetData[1]?.axisX - targetData[0]?.axisX
          this.referenceBinWidth = referenceData[1]?.axisX - referenceData[0]?.axisX
          this.maxTargetXValue = d3.max(targetData, (d) =&gt; d.axisX);

          this.maxReferenceXValue = d3.max(referenceData, (d) =&gt; d.axisX);

          this.xScale = d3
              .scaleLinear()
         .domain([d3.min(this.charts2, function(d) { return parseFloat(d.axisX); }),(this.maxTargetXValue+this.targetBinWidth &gt;= this.maxReferenceXValue+this.referenceBinWidth) ? this.maxTargetXValue+this.targetBinWidth:this.maxReferenceXValue+this.referenceBinWidth])
         .range([0, this.CHART_WIDTH ]);

         this.svgEl.append(&quot;g&quot;)
             .attr(&quot;transform&quot;, &quot;translate(&quot;+ this.MARGIN.LEFT +&quot;,&quot; + this.SVG_HEIGHT + &quot;)&quot;)
             .call(d3.axisBottom(this.xScale));
          this.yScale = d3.scaleLinear()
              .range([this.CHART_HEIGHT , 0])
              .domain([d3.min(this.charts2, function(d) { return parseFloat(d.axisY); }), d3.max(this.charts2, function(d) { return parseFloat(d.axisY); })*1.2])
              .nice();
        }
      }

      function chartData(column) {
        const data = [];
        if (column?.histogram) {
          for (let i = 0; i&lt;column.histogram.bins.length; i++) {
            data.push({
              axisY: column.histogram.counts[i] || 0,
              axisX: column.histogram.bins[i] || 0,
            });
          }
        } else {
            $(document).ready(() =&gt;
              $(&quot;.desktop-content&quot;).html(`
                &lt;p style=&quot;height: ${$(window).height()}px&quot; class=&quot;error-message&quot;&gt;
                  Something went wrong. Please try again.
                &lt;/p&gt;
              `)
            )
          }

        return data
      }

      function verticalLine(column) {
        const line_data = [];
        if (column?.vertical_line) {
            line_data.push({
              axisX: column?.vertical_line || 0,
            });

        }

        return line_data
      }

      function generateDoubleHistogramChart(targetData, referenceData) {
        let histogramData = [],
            overlappedHistogramData = [];
        let yFormat;

        histogramData = chartData(targetData)
        overlappedHistogramData = chartData(referenceData)
        lineData = verticalLine(targetData)

        const sizes = new GenerateChartParams($(window).height()-80, $(window).width(), histogramData, overlappedHistogramData)
        const {
          MARGIN,
          SVG_WIDTH,
          SVG_HEIGHT,
          CHART_WIDTH,
          CHART_HEIGHT,
          svgEl,
          maxYValue,
          minYValue,
          xScale,
          yScale
        } = sizes

        const rectColors = [&quot;#44C0E7&quot;, &quot;#F5843C&quot;]
        const yAxis = d3.axisLeft(yScale).ticks(SVG_HEIGHT / 40);

        svgEl.append(&quot;g&quot;)
          .attr(&quot;transform&quot;, `translate(${MARGIN.LEFT}, ${MARGIN.BOTTOM})`)
          .call(yAxis)
          .call(g =&gt; g.select(&quot;.domain&quot;).remove())
          .call(g =&gt; g.selectAll(&quot;.tick line&quot;)
              .attr(&quot;x2&quot;, CHART_WIDTH)
              .attr(&quot;stroke-opacity&quot;, 0.1))
          .call(g =&gt; g.append(&quot;text&quot;)
              .attr(&quot;x&quot;, -MARGIN.LEFT)
              .attr(&quot;y&quot;, 10)
              .attr(&quot;fill&quot;, &quot;currentColor&quot;)
              .attr(&quot;text-anchor&quot;, &quot;start&quot;))

        svgEl.append(&quot;line&quot;)
          .attr(&quot;transform&quot;, `translate(${MARGIN.LEFT}, ${MARGIN.BOTTOM})`)
          .data(lineData)
          .attr(&quot;x1&quot;, (d) =&gt; xScale(d.axisX))
          .attr(&quot;y1&quot;, MARGIN.TOP + MARGIN.TOP)
          .attr(&quot;x2&quot;, (d) =&gt; xScale(d.axisX))
          .attr(&quot;y2&quot;, CHART_HEIGHT + MARGIN.TOP)
          .style(&quot;stroke-width&quot;, 2)
          .style(&quot;stroke&quot;, &quot;#44C0E7&quot;)
          .style(&quot;stroke-dasharray&quot;, (3,3))
          .style(&quot;fill&quot;, &quot;none&quot;);

        svgEl.append(&quot;text&quot;)
          .attr(&quot;transform&quot;, &quot;rotate(-90)&quot;)
          .data(lineData)
          .attr(&quot;y&quot;, (d) =&gt; xScale(d.axisX) + MARGIN.LEFT)
          .attr(&quot;x&quot;, 0 - (SVG_HEIGHT / 2))
          .attr(&quot;dy&quot;, &quot;1em&quot;)
          .style(&quot;text-anchor&quot;, &quot;middle&quot;)
          .text(&quot;single value&quot;)
          .style(&quot;font-size&quot;, &quot;15&quot;)
          .style(&quot;opacity&quot;, &quot;0.6&quot;)

        svgEl.append(&quot;text&quot;)
          .attr(&quot;transform&quot;,
                &quot;translate(&quot; + (CHART_WIDTH/2) + &quot; ,&quot; +
                               (CHART_HEIGHT + MARGIN.TOP + 75) + &quot;)&quot;)
          .style(&quot;text-anchor&quot;, &quot;middle&quot;)
          .text(&quot;Values&quot;)
          .style(&quot;font-size&quot;, &quot;15&quot;)
          .style(&quot;opacity&quot;, &quot;0.6&quot;)

        svgEl.append(&quot;text&quot;)
          .attr(&quot;transform&quot;, &quot;rotate(-90)&quot;)
          .attr(&quot;y&quot;, 0)
          .attr(&quot;x&quot;, 0 - (SVG_HEIGHT / 2))
          .attr(&quot;dy&quot;, &quot;1em&quot;)
          .style(&quot;text-anchor&quot;, &quot;middle&quot;)
          .text(&quot;Counts&quot;)
          .style(&quot;font-size&quot;, &quot;15&quot;)
          .style(&quot;opacity&quot;, &quot;0.6&quot;)

          const gChart = svgEl.append(&quot;g&quot;);
          gChart
          .attr(&quot;transform&quot;, &quot;translate(&quot;+ MARGIN.LEFT +&quot;,0)&quot;)
          .selectAll(&quot;.bar&quot;)
          .data(histogramData)
          .enter()
          .append(&quot;rect&quot;)
          .style(&quot;stroke&quot;, &quot;#021826&quot;)
          .classed(&quot;bar&quot;, true)
          .attr(&quot;width&quot;, function(d) { return xScale(histogramData[1]?.axisX)-xScale(histogramData[0]?.axisX); })
          .attr(&quot;height&quot;, (d) =&gt; CHART_HEIGHT - yScale(d.axisY))
          .attr(&quot;x&quot;, 1)
          .attr(&quot;transform&quot;, function(d) { return &quot;translate(&quot; + xScale(d.axisX) + &quot;,&quot; + 0  +  &quot;)&quot;; })
          .attr(&quot;y&quot;, (d) =&gt; yScale(d.axisY) + MARGIN.TOP + MARGIN.BOTTOM)
          .attr(&quot;fill&quot;, rectColors[0])
          .style(&quot;opacity&quot;,&quot;0.6&quot;)

          const gChart1 = svgEl.append(&quot;g&quot;);
          gChart1
          .attr(&quot;transform&quot;, &quot;translate(&quot;+ MARGIN.LEFT +&quot;,0)&quot;)
          .selectAll(&quot;.bar&quot;)
          .data(overlappedHistogramData)
          .enter()
          .append(&quot;rect&quot;)
          .style(&quot;stroke&quot;, &quot;#021826&quot;)
          .classed(&quot;bar&quot;, true)
          .attr(&quot;width&quot;, function(d) { return xScale(overlappedHistogramData[1]?.axisX)-xScale(overlappedHistogramData[0]?.axisX); })
          .attr(&quot;height&quot;, (d) =&gt; CHART_HEIGHT - yScale(d.axisY))
          .attr(&quot;x&quot;, 1)
          .attr(&quot;transform&quot;, function(d) { return &quot;translate(&quot; + xScale(d.axisX) + &quot;,&quot; + 0  +  &quot;)&quot;; })
          .attr(&quot;y&quot;, (d) =&gt; yScale(d.axisY) + MARGIN.TOP + MARGIN.BOTTOM)
          .attr(&quot;fill&quot;, rectColors[1])
          .style(&quot;opacity&quot;,&quot;0.6&quot;)

        return svgEl._groups[0][0].outerHTML;
      }

      const profileFromCSVfile = {&quot;petal width (cm)&quot;: {&quot;histogram&quot;: {&quot;start&quot;: 0.1, &quot;end&quot;: 2.50000025, &quot;width&quot;: 0, &quot;counts&quot;: [5, 29, 7, 7, 1, 0, 1, 0, 0, 0, 0, 7, 3, 5, 13, 0, 8, 12, 4, 2, 0, 12, 5, 6, 6, 0, 3, 8, 3, 3], &quot;max&quot;: 2.5, &quot;min&quot;: 0.1, &quot;bins&quot;: [0.1, 0.18000000833333335, 0.26000001666666667, 0.34000002500000004, 0.42000003333333336, 0.5000000416666667, 0.58000005, 0.6600000583333333, 0.7400000666666666, 0.8200000749999999, 0.9000000833333333, 0.9800000916666666, 1.0600001000000001, 1.1400001083333333, 1.2200001166666667, 1.300000125, 1.3800001333333334, 1.4600001416666668, 1.54000015, 1.6200001583333334, 1.7000001666666666, 1.780000175, 1.8600001833333333, 1.9400001916666667, 2.0200002, 2.1000002083333333, 2.1800002166666665, 2.260000225, 2.3400002333333334, 2.4200002416666666, 2.50000025], &quot;n&quot;: 150}}}

      Handlebars.registerHelper(&quot;getDoubleHistogramChart&quot;,(column,key) =&gt; {
          const columnKey = key.data.key
        try {
          if (profileFromCSVfile) {
          return  generateDoubleHistogramChart (
              column,
              profileFromCSVfile[columnKey]
            )
          }
        } catch (err) {
          $(document).ready(() =&gt;
            $(&quot;.desktop-content&quot;).html(`
              &lt;p style=&quot;height: ${$(window).height()}px&quot; class=&quot;error-message&quot;&gt;
                Something went wrong. Please try again.
              &lt;/p&gt;
            `)
          )
        }
      });
    }

    function initWebsiteScripts() {
      $(&quot;.svg-container&quot;).css(&quot;height&quot;, $(window).height() - 32)
    }

    function initHandlebarsTemplate() {
      // Replace this context with JSON from .py file
      const context = {&quot;petal width (cm)&quot;: {&quot;histogram&quot;: {&quot;start&quot;: 0.1, &quot;end&quot;: 2.50000025, &quot;width&quot;: 0, &quot;counts&quot;: [5, 29, 7, 7, 1, 0, 1, 0, 0, 0, 0, 7, 3, 5, 13, 0, 8, 12, 4, 2, 0, 12, 5, 6, 6, 0, 3, 8, 3, 3], &quot;max&quot;: 2.5, &quot;min&quot;: 0.1, &quot;bins&quot;: [0.1, 0.18000000833333335, 0.26000001666666667, 0.34000002500000004, 0.42000003333333336, 0.5000000416666667, 0.58000005, 0.6600000583333333, 0.7400000666666666, 0.8200000749999999, 0.9000000833333333, 0.9800000916666666, 1.0600001000000001, 1.1400001083333333, 1.2200001166666667, 1.300000125, 1.3800001333333334, 1.4600001416666668, 1.54000015, 1.6200001583333334, 1.7000001666666666, 1.780000175, 1.8600001833333333, 1.9400001916666667, 2.0200002, 2.1000002083333333, 2.1800002166666665, 2.260000225, 2.3400002333333334, 2.4200002416666666, 2.50000025], &quot;n&quot;: 150}}};
      // Config handlebars and pass data to HBS template
      const source = document.getElementById(&quot;entry-template&quot;).innerHTML;
      const template = Handlebars.compile(source);
      const html = template(context);
      const target = document.getElementById(&quot;generated-html&quot;);
      target.innerHTML = html;
    }

    // Invoke functions -- keep in mind invokation order
    registerHandlebarHelperFunctions();
    initHandlebarsTemplate();
    initWebsiteScripts();
  &lt;/script&gt;
&lt;/html&gt;
" width=100% height=300px
        frameBorder=0></iframe><br><div></div><iframe srcdoc="&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
  &lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot; /&gt;
    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot; /&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot; /&gt;
    &lt;meta name=&quot;description&quot; content=&quot;&quot; /&gt;
    &lt;meta name=&quot;author&quot; content=&quot;&quot; /&gt;

    &lt;title&gt;Profile Visualizer | whylogs&lt;/title&gt;

    &lt;link rel=&quot;icon&quot; href=&quot;images/whylabs-favicon.png&quot; type=&quot;image/png&quot; sizes=&quot;16x16&quot; /&gt;
    &lt;link rel=&quot;preconnect&quot; href=&quot;https://fonts.googleapis.com&quot; /&gt;
    &lt;link rel=&quot;preconnect&quot; href=&quot;https://fonts.gstatic.com&quot; crossorigin /&gt;
    &lt;link href=&quot;https://fonts.googleapis.com/css2?family=Asap:wght@400;500;600;700&amp;display=swap&quot; rel=&quot;stylesheet&quot; /&gt;
    &lt;link rel=&quot;preconnect&quot; href=&quot;https://fonts.gstatic.com&quot; /&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css&quot; /&gt;

    &lt;script
      src=&quot;https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.7.7/handlebars.min.js&quot;
      integrity=&quot;sha512-RNLkV3d+aLtfcpEyFG8jRbnWHxUqVZozacROI4J2F1sTaDqo1dPQYs01OMi1t1w9Y2FdbSCDSQ2ZVdAC8bzgAg==&quot;
      crossorigin=&quot;anonymous&quot;
      referrerpolicy=&quot;no-referrer&quot;
    &gt;&lt;/script&gt;

    &lt;style type=&quot;text/css&quot;&gt;

      :root {
        /** Branded colors */
        --brandSecondary900: #4f595b;
        --secondaryLight1000: #313b3d;
        /** Purpose colors */
        --tealBackground: #eaf2f3;
      }

      /* RESET STYLE */
      *,
      *::after,
      *::before {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        overflow-y: hidden;
      }

      /* Screen on smaller screens */
      .no-responsive {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        z-index: 1031;
        width: 100vw;
        height: 100vh;
        background-color: var(--tealBackground);
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .desktop-content {
        display: flex;
        flex-direction: column;
      }

      .no-responsive__content {
        max-width: 600px;
        width: 100%;
        padding: 0 24px;
      }

      .no-responsive__title {
        font-size: 96px;
        font-weight: 300;
        color: var(--brandSecondary900);
        line-height: 1.167;
      }

      .no-responsive__text {
        margin: 0;
        font-size: 16px;
        font-weight: 400;
        color: var(--brandSecondary900);
        line-height: 1.5;
      }

      .svg-container {
        display: inline-block;
        position: relative;
        width: 100%;
        vertical-align: top;
        overflow: hidden;
      }

      .svg-content-responsive {
        display: inline-block;
        position: absolute;
        left: 0;
      }

      .circle-color {
       display: inline-block;
       padding: 5px;
       border-radius: 50px;
     }

     .colors-for-distingushing-charts {
       padding-right: 10px;
     }

     .display-flex{
       display: flex;
     }

     .align-items-flex-end {
       align-items: flex-end;
     }

     .chart-box-title {
       width: 88%;
       justify-content: space-between;
       margin: 10px;
       margin-top: 15px;
       bottom: 0;
     }

     .chart-box-title p{
       margin-bottom: 0;
       font-family: Asap;
       font-weight: bold;
       font-size: 18px;
       line-height: 16px;
       color: #4F595B;
     }

    .bar {
      font: 10px sans-serif;
    }

    .bar path,
    .bar line {
      fill: none;
      stroke: #000;
      shape-rendering: crispEdges;
    }

    .error-message {
      display: flex;
      justify-content: center;
      align-items: center;
      color: rgb(255, 114, 71);
      font-size: 30px;
      font-weight: 900;
    }

     @media screen and (min-width: 500px) {
       .desktop-content {
         display: block;
       }
       .no-responsive {
         display: none;
       }
     }
    &lt;/style&gt;
  &lt;/head&gt;

  &lt;body id=&quot;generated-html&quot;&gt;&lt;/body&gt;
  &lt;script id=&quot;entry-template&quot; type=&quot;text/x-handlebars-template&quot;&gt;
    
      &lt;div class=&quot;desktop-content&quot;&gt;
{{#each this}}              &lt;div class=&quot;chart-box&quot; id=&quot;chart-box&quot;&gt;
                &lt;div class=&quot;chart-box-title display-flex&quot;&gt;
                  &lt;p&gt;{{@key}}&lt;/p&gt;
                  &lt;div class=&quot;display-flex&quot;&gt;
                    &lt;div class=&quot;colors-for-distingushing-charts&quot;&gt;
                      &lt;div class=&quot;circle-color&quot; style=&quot;background: #44C0E7;&quot;&gt;&lt;/div&gt;
                      &lt;text alignment-baseline=&quot;middle&quot; style=&quot;font-size: 15px;&quot;&gt;Target&lt;/text&gt;
                    &lt;/div&gt;
                    &lt;div class=&quot;colors-for-distingushing-charts&quot;&gt;
                      &lt;div class=&quot;circle-color&quot; style=&quot;background: #F5843C&quot;&gt;&lt;/div&gt;
                      &lt;text alignment-baseline=&quot;middle&quot; style=&quot;font-size: 15px;&quot;&gt;Reference&lt;/text&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;&lt;/div&gt;
                &lt;div class=&quot;svg-container&quot;&gt;{{{getDoubleHistogramChart this}}}&lt;/div&gt;
              &lt;/div&gt;
{{/each}}      &lt;/div&gt;
      &lt;div class=&quot;no-responsive&quot;&gt;
        &lt;div class=&quot;no-responsive__content&quot;&gt;
          &lt;h1 class=&quot;no-responsive__title&quot;&gt;Hold on! :)&lt;/h1&gt;
          &lt;p class=&quot;no-responsive__text&quot;&gt;
            It looks like your current screen size or device is not yet supported by the WhyLabs Sandbox. The Sandbox is
            best experienced on a desktop computer. Please try maximizing this window or switching to another device. We
            are working on adding support for a larger variety of devices.
          &lt;/p&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    
  &lt;/script&gt;

  &lt;script src=&quot;https://code.jquery.com/jquery-3.6.0.min.js&quot; integrity=&quot;sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=&quot; crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt;

  &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/d3/6.7.0/d3.min.js&quot; integrity=&quot;sha512-cd6CHE+XWDQ33ElJqsi0MdNte3S+bQY819f7p3NUHgwQQLXSKjE4cPZTeGNI+vaxZynk1wVU3hoHmow3m089wA==&quot; crossorigin=&quot;anonymous&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/script&gt;

  &lt;script&gt;
    function registerHandlebarHelperFunctions() {
      //helper fun

      class GenerateChartParams {
        constructor(height, width, targetData, referenceData, bottomMargin=30, topMargin=5) {
          this.MARGIN = {
            TOP: topMargin,
            RIGHT: 5,
            BOTTOM: bottomMargin,
            LEFT: 55,
          };
          this.SVG_WIDTH = width;
          this.SVG_HEIGHT = height;
          this.CHART_WIDTH = this.SVG_WIDTH - this.MARGIN.LEFT - this.MARGIN.RIGHT;
          this.CHART_HEIGHT = this.SVG_HEIGHT - this.MARGIN.TOP - this.MARGIN.BOTTOM;
          this.svgEl = d3.create(&quot;svg&quot;)
             .attr(&quot;preserveAspectRatio&quot;, &quot;xMinYMin meet&quot;)
             .attr(&quot;viewBox&quot;, `0 0 ${$(window).width()+100} ${$(window).height()-30}`)
             .classed(&quot;svg-content-responsive&quot;, true)
          this.maxYValue = d3.max(targetData, (d) =&gt; Math.abs(d.axisY));
          this.minYValue = d3.min(targetData, (d) =&gt; Math.abs(d.axisY));
          const mergedReferenceData = referenceData.map(({axisX, axisY}) =&gt; {
            return {axisX, axisY}
          })
          const mergedTargetedData = targetData.map(({axisX, axisY}) =&gt; {
            return {axisX, axisY}
          })

          this.charts2 = mergedReferenceData.concat(mergedTargetedData)
          this.charts2 = this.charts2.sort(function(a, b) { return a - b; });

          this.targetBinWidth = targetData[1]?.axisX - targetData[0]?.axisX
          this.referenceBinWidth = referenceData[1]?.axisX - referenceData[0]?.axisX
          this.maxTargetXValue = d3.max(targetData, (d) =&gt; d.axisX);

          this.maxReferenceXValue = d3.max(referenceData, (d) =&gt; d.axisX);

          this.xScale = d3
              .scaleLinear()
         .domain([d3.min(this.charts2, function(d) { return parseFloat(d.axisX); }),(this.maxTargetXValue+this.targetBinWidth &gt;= this.maxReferenceXValue+this.referenceBinWidth) ? this.maxTargetXValue+this.targetBinWidth:this.maxReferenceXValue+this.referenceBinWidth])
         .range([0, this.CHART_WIDTH ]);

         this.svgEl.append(&quot;g&quot;)
             .attr(&quot;transform&quot;, &quot;translate(&quot;+ this.MARGIN.LEFT +&quot;,&quot; + this.SVG_HEIGHT + &quot;)&quot;)
             .call(d3.axisBottom(this.xScale));
          this.yScale = d3.scaleLinear()
              .range([this.CHART_HEIGHT , 0])
              .domain([d3.min(this.charts2, function(d) { return parseFloat(d.axisY); }), d3.max(this.charts2, function(d) { return parseFloat(d.axisY); })*1.2])
              .nice();
        }
      }

      function chartData(column) {
        const data = [];
        if (column?.histogram) {
          for (let i = 0; i&lt;column.histogram.bins.length; i++) {
            data.push({
              axisY: column.histogram.counts[i] || 0,
              axisX: column.histogram.bins[i] || 0,
            });
          }
        } else {
            $(document).ready(() =&gt;
              $(&quot;.desktop-content&quot;).html(`
                &lt;p style=&quot;height: ${$(window).height()}px&quot; class=&quot;error-message&quot;&gt;
                  Something went wrong. Please try again.
                &lt;/p&gt;
              `)
            )
          }

        return data
      }

      function verticalLine(column) {
        const line_data = [];
        if (column?.vertical_line) {
            line_data.push({
              axisX: column?.vertical_line || 0,
            });

        }

        return line_data
      }

      function generateDoubleHistogramChart(targetData, referenceData) {
        let histogramData = [],
            overlappedHistogramData = [];
        let yFormat;

        histogramData = chartData(targetData)
        overlappedHistogramData = chartData(referenceData)
        lineData = verticalLine(targetData)

        const sizes = new GenerateChartParams($(window).height()-80, $(window).width(), histogramData, overlappedHistogramData)
        const {
          MARGIN,
          SVG_WIDTH,
          SVG_HEIGHT,
          CHART_WIDTH,
          CHART_HEIGHT,
          svgEl,
          maxYValue,
          minYValue,
          xScale,
          yScale
        } = sizes

        const rectColors = [&quot;#44C0E7&quot;, &quot;#F5843C&quot;]
        const yAxis = d3.axisLeft(yScale).ticks(SVG_HEIGHT / 40);

        svgEl.append(&quot;g&quot;)
          .attr(&quot;transform&quot;, `translate(${MARGIN.LEFT}, ${MARGIN.BOTTOM})`)
          .call(yAxis)
          .call(g =&gt; g.select(&quot;.domain&quot;).remove())
          .call(g =&gt; g.selectAll(&quot;.tick line&quot;)
              .attr(&quot;x2&quot;, CHART_WIDTH)
              .attr(&quot;stroke-opacity&quot;, 0.1))
          .call(g =&gt; g.append(&quot;text&quot;)
              .attr(&quot;x&quot;, -MARGIN.LEFT)
              .attr(&quot;y&quot;, 10)
              .attr(&quot;fill&quot;, &quot;currentColor&quot;)
              .attr(&quot;text-anchor&quot;, &quot;start&quot;))

        svgEl.append(&quot;line&quot;)
          .attr(&quot;transform&quot;, `translate(${MARGIN.LEFT}, ${MARGIN.BOTTOM})`)
          .data(lineData)
          .attr(&quot;x1&quot;, (d) =&gt; xScale(d.axisX))
          .attr(&quot;y1&quot;, MARGIN.TOP + MARGIN.TOP)
          .attr(&quot;x2&quot;, (d) =&gt; xScale(d.axisX))
          .attr(&quot;y2&quot;, CHART_HEIGHT + MARGIN.TOP)
          .style(&quot;stroke-width&quot;, 2)
          .style(&quot;stroke&quot;, &quot;#44C0E7&quot;)
          .style(&quot;stroke-dasharray&quot;, (3,3))
          .style(&quot;fill&quot;, &quot;none&quot;);

        svgEl.append(&quot;text&quot;)
          .attr(&quot;transform&quot;, &quot;rotate(-90)&quot;)
          .data(lineData)
          .attr(&quot;y&quot;, (d) =&gt; xScale(d.axisX) + MARGIN.LEFT)
          .attr(&quot;x&quot;, 0 - (SVG_HEIGHT / 2))
          .attr(&quot;dy&quot;, &quot;1em&quot;)
          .style(&quot;text-anchor&quot;, &quot;middle&quot;)
          .text(&quot;single value&quot;)
          .style(&quot;font-size&quot;, &quot;15&quot;)
          .style(&quot;opacity&quot;, &quot;0.6&quot;)

        svgEl.append(&quot;text&quot;)
          .attr(&quot;transform&quot;,
                &quot;translate(&quot; + (CHART_WIDTH/2) + &quot; ,&quot; +
                               (CHART_HEIGHT + MARGIN.TOP + 75) + &quot;)&quot;)
          .style(&quot;text-anchor&quot;, &quot;middle&quot;)
          .text(&quot;Values&quot;)
          .style(&quot;font-size&quot;, &quot;15&quot;)
          .style(&quot;opacity&quot;, &quot;0.6&quot;)

        svgEl.append(&quot;text&quot;)
          .attr(&quot;transform&quot;, &quot;rotate(-90)&quot;)
          .attr(&quot;y&quot;, 0)
          .attr(&quot;x&quot;, 0 - (SVG_HEIGHT / 2))
          .attr(&quot;dy&quot;, &quot;1em&quot;)
          .style(&quot;text-anchor&quot;, &quot;middle&quot;)
          .text(&quot;Counts&quot;)
          .style(&quot;font-size&quot;, &quot;15&quot;)
          .style(&quot;opacity&quot;, &quot;0.6&quot;)

          const gChart = svgEl.append(&quot;g&quot;);
          gChart
          .attr(&quot;transform&quot;, &quot;translate(&quot;+ MARGIN.LEFT +&quot;,0)&quot;)
          .selectAll(&quot;.bar&quot;)
          .data(histogramData)
          .enter()
          .append(&quot;rect&quot;)
          .style(&quot;stroke&quot;, &quot;#021826&quot;)
          .classed(&quot;bar&quot;, true)
          .attr(&quot;width&quot;, function(d) { return xScale(histogramData[1]?.axisX)-xScale(histogramData[0]?.axisX); })
          .attr(&quot;height&quot;, (d) =&gt; CHART_HEIGHT - yScale(d.axisY))
          .attr(&quot;x&quot;, 1)
          .attr(&quot;transform&quot;, function(d) { return &quot;translate(&quot; + xScale(d.axisX) + &quot;,&quot; + 0  +  &quot;)&quot;; })
          .attr(&quot;y&quot;, (d) =&gt; yScale(d.axisY) + MARGIN.TOP + MARGIN.BOTTOM)
          .attr(&quot;fill&quot;, rectColors[0])
          .style(&quot;opacity&quot;,&quot;0.6&quot;)

          const gChart1 = svgEl.append(&quot;g&quot;);
          gChart1
          .attr(&quot;transform&quot;, &quot;translate(&quot;+ MARGIN.LEFT +&quot;,0)&quot;)
          .selectAll(&quot;.bar&quot;)
          .data(overlappedHistogramData)
          .enter()
          .append(&quot;rect&quot;)
          .style(&quot;stroke&quot;, &quot;#021826&quot;)
          .classed(&quot;bar&quot;, true)
          .attr(&quot;width&quot;, function(d) { return xScale(overlappedHistogramData[1]?.axisX)-xScale(overlappedHistogramData[0]?.axisX); })
          .attr(&quot;height&quot;, (d) =&gt; CHART_HEIGHT - yScale(d.axisY))
          .attr(&quot;x&quot;, 1)
          .attr(&quot;transform&quot;, function(d) { return &quot;translate(&quot; + xScale(d.axisX) + &quot;,&quot; + 0  +  &quot;)&quot;; })
          .attr(&quot;y&quot;, (d) =&gt; yScale(d.axisY) + MARGIN.TOP + MARGIN.BOTTOM)
          .attr(&quot;fill&quot;, rectColors[1])
          .style(&quot;opacity&quot;,&quot;0.6&quot;)

        return svgEl._groups[0][0].outerHTML;
      }

      const profileFromCSVfile = {&quot;target&quot;: {&quot;histogram&quot;: {&quot;start&quot;: 0.0, &quot;end&quot;: 2.0000002, &quot;width&quot;: 0, &quot;counts&quot;: [50, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 50, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 50], &quot;max&quot;: 2.0, &quot;min&quot;: 0.0, &quot;bins&quot;: [0.0, 0.06666667333333334, 0.13333334666666669, 0.20000002000000003, 0.26666669333333337, 0.3333333666666667, 0.40000004000000006, 0.4666667133333334, 0.5333333866666667, 0.6000000600000001, 0.6666667333333334, 0.7333334066666668, 0.8000000800000001, 0.8666667533333334, 0.9333334266666669, 1.0000001, 1.0666667733333335, 1.133333446666667, 1.2000001200000001, 1.2666667933333335, 1.3333334666666667, 1.4000001400000002, 1.4666668133333336, 1.5333334866666668, 1.6000001600000002, 1.6666668333333337, 1.7333335066666669, 1.8000001800000003, 1.8666668533333337, 1.933333526666667, 2.0000002], &quot;n&quot;: 150}}}

      Handlebars.registerHelper(&quot;getDoubleHistogramChart&quot;,(column,key) =&gt; {
          const columnKey = key.data.key
        try {
          if (profileFromCSVfile) {
          return  generateDoubleHistogramChart (
              column,
              profileFromCSVfile[columnKey]
            )
          }
        } catch (err) {
          $(document).ready(() =&gt;
            $(&quot;.desktop-content&quot;).html(`
              &lt;p style=&quot;height: ${$(window).height()}px&quot; class=&quot;error-message&quot;&gt;
                Something went wrong. Please try again.
              &lt;/p&gt;
            `)
          )
        }
      });
    }

    function initWebsiteScripts() {
      $(&quot;.svg-container&quot;).css(&quot;height&quot;, $(window).height() - 32)
    }

    function initHandlebarsTemplate() {
      // Replace this context with JSON from .py file
      const context = {&quot;target&quot;: {&quot;histogram&quot;: {&quot;start&quot;: 0.0, &quot;end&quot;: 2.0000002, &quot;width&quot;: 0, &quot;counts&quot;: [50, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 50, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 50], &quot;max&quot;: 2.0, &quot;min&quot;: 0.0, &quot;bins&quot;: [0.0, 0.06666667333333334, 0.13333334666666669, 0.20000002000000003, 0.26666669333333337, 0.3333333666666667, 0.40000004000000006, 0.4666667133333334, 0.5333333866666667, 0.6000000600000001, 0.6666667333333334, 0.7333334066666668, 0.8000000800000001, 0.8666667533333334, 0.9333334266666669, 1.0000001, 1.0666667733333335, 1.133333446666667, 1.2000001200000001, 1.2666667933333335, 1.3333334666666667, 1.4000001400000002, 1.4666668133333336, 1.5333334866666668, 1.6000001600000002, 1.6666668333333337, 1.7333335066666669, 1.8000001800000003, 1.8666668533333337, 1.933333526666667, 2.0000002], &quot;n&quot;: 150}}};
      // Config handlebars and pass data to HBS template
      const source = document.getElementById(&quot;entry-template&quot;).innerHTML;
      const template = Handlebars.compile(source);
      const html = template(context);
      const target = document.getElementById(&quot;generated-html&quot;);
      target.innerHTML = html;
    }

    // Invoke functions -- keep in mind invokation order
    registerHandlebarHelperFunctions();
    initHandlebarsTemplate();
    initWebsiteScripts();
  &lt;/script&gt;
&lt;/html&gt;
" width=100% height=300px
        frameBorder=0></iframe><br><div></div><iframe srcdoc="&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
  &lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot; /&gt;
    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot; /&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot; /&gt;
    &lt;meta name=&quot;description&quot; content=&quot;&quot; /&gt;
    &lt;meta name=&quot;author&quot; content=&quot;&quot; /&gt;

    &lt;title&gt;Profile Visualizer | whylogs&lt;/title&gt;

    &lt;link rel=&quot;icon&quot; href=&quot;images/whylabs-favicon.png&quot; type=&quot;image/png&quot; sizes=&quot;16x16&quot; /&gt;
    &lt;link rel=&quot;preconnect&quot; href=&quot;https://fonts.googleapis.com&quot; /&gt;
    &lt;link rel=&quot;preconnect&quot; href=&quot;https://fonts.gstatic.com&quot; crossorigin /&gt;
    &lt;link href=&quot;https://fonts.googleapis.com/css2?family=Asap:wght@400;500;600;700&amp;display=swap&quot; rel=&quot;stylesheet&quot; /&gt;
    &lt;link rel=&quot;preconnect&quot; href=&quot;https://fonts.gstatic.com&quot; /&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css&quot; /&gt;

    &lt;script
      src=&quot;https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.7.7/handlebars.min.js&quot;
      integrity=&quot;sha512-RNLkV3d+aLtfcpEyFG8jRbnWHxUqVZozacROI4J2F1sTaDqo1dPQYs01OMi1t1w9Y2FdbSCDSQ2ZVdAC8bzgAg==&quot;
      crossorigin=&quot;anonymous&quot;
      referrerpolicy=&quot;no-referrer&quot;
    &gt;&lt;/script&gt;

    &lt;style type=&quot;text/css&quot;&gt;

      :root {
        /** Branded colors */
        --brandSecondary900: #4f595b;
        --secondaryLight1000: #313b3d;
        /** Purpose colors */
        --tealBackground: #eaf2f3;
      }

      /* RESET STYLE */
      *,
      *::after,
      *::before {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        overflow-y: hidden;
      }

      /* Screen on smaller screens */
      .no-responsive {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        z-index: 1031;
        width: 100vw;
        height: 100vh;
        background-color: var(--tealBackground);
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .desktop-content {
        display: flex;
        flex-direction: column;
      }

      .no-responsive__content {
        max-width: 600px;
        width: 100%;
        padding: 0 24px;
      }

      .no-responsive__title {
        font-size: 96px;
        font-weight: 300;
        color: var(--brandSecondary900);
        line-height: 1.167;
      }

      .no-responsive__text {
        margin: 0;
        font-size: 16px;
        font-weight: 400;
        color: var(--brandSecondary900);
        line-height: 1.5;
      }

      .svg-container {
        display: inline-block;
        position: relative;
        width: 100%;
        vertical-align: top;
        overflow: hidden;
      }

      .svg-content-responsive {
        display: inline-block;
        position: absolute;
        left: 0;
      }

      .circle-color {
       display: inline-block;
       padding: 5px;
       border-radius: 50px;
     }

     .colors-for-distingushing-charts {
       padding-right: 10px;
     }

     .display-flex{
       display: flex;
     }

     .align-items-flex-end {
       align-items: flex-end;
     }

     .chart-box-title {
       width: 88%;
       justify-content: space-between;
       margin: 10px;
       margin-top: 15px;
       bottom: 0;
     }

     .chart-box-title p{
       margin-bottom: 0;
       font-family: Asap;
       font-weight: bold;
       font-size: 18px;
       line-height: 16px;
       color: #4F595B;
     }

    .bar {
      font: 10px sans-serif;
    }

    .bar path,
    .bar line {
      fill: none;
      stroke: #000;
      shape-rendering: crispEdges;
    }

    .error-message {
      display: flex;
      justify-content: center;
      align-items: center;
      color: rgb(255, 114, 71);
      font-size: 30px;
      font-weight: 900;
    }

     @media screen and (min-width: 500px) {
       .desktop-content {
         display: block;
       }
       .no-responsive {
         display: none;
       }
     }
    &lt;/style&gt;
  &lt;/head&gt;

  &lt;body id=&quot;generated-html&quot;&gt;&lt;/body&gt;
  &lt;script id=&quot;entry-template&quot; type=&quot;text/x-handlebars-template&quot;&gt;
    
      &lt;div class=&quot;desktop-content&quot;&gt;
{{#each this}}              &lt;div class=&quot;chart-box&quot; id=&quot;chart-box&quot;&gt;
                &lt;div class=&quot;chart-box-title display-flex&quot;&gt;
                  &lt;p&gt;{{@key}}&lt;/p&gt;
                  &lt;div class=&quot;display-flex&quot;&gt;
                    &lt;div class=&quot;colors-for-distingushing-charts&quot;&gt;
                      &lt;div class=&quot;circle-color&quot; style=&quot;background: #44C0E7;&quot;&gt;&lt;/div&gt;
                      &lt;text alignment-baseline=&quot;middle&quot; style=&quot;font-size: 15px;&quot;&gt;Target&lt;/text&gt;
                    &lt;/div&gt;
                    &lt;div class=&quot;colors-for-distingushing-charts&quot;&gt;
                      &lt;div class=&quot;circle-color&quot; style=&quot;background: #F5843C&quot;&gt;&lt;/div&gt;
                      &lt;text alignment-baseline=&quot;middle&quot; style=&quot;font-size: 15px;&quot;&gt;Reference&lt;/text&gt;
                    &lt;/div&gt;
                  &lt;/div&gt;&lt;/div&gt;
                &lt;div class=&quot;svg-container&quot;&gt;{{{getDoubleHistogramChart this}}}&lt;/div&gt;
              &lt;/div&gt;
{{/each}}      &lt;/div&gt;
      &lt;div class=&quot;no-responsive&quot;&gt;
        &lt;div class=&quot;no-responsive__content&quot;&gt;
          &lt;h1 class=&quot;no-responsive__title&quot;&gt;Hold on! :)&lt;/h1&gt;
          &lt;p class=&quot;no-responsive__text&quot;&gt;
            It looks like your current screen size or device is not yet supported by the WhyLabs Sandbox. The Sandbox is
            best experienced on a desktop computer. Please try maximizing this window or switching to another device. We
            are working on adding support for a larger variety of devices.
          &lt;/p&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    
  &lt;/script&gt;

  &lt;script src=&quot;https://code.jquery.com/jquery-3.6.0.min.js&quot; integrity=&quot;sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=&quot; crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt;

  &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/d3/6.7.0/d3.min.js&quot; integrity=&quot;sha512-cd6CHE+XWDQ33ElJqsi0MdNte3S+bQY819f7p3NUHgwQQLXSKjE4cPZTeGNI+vaxZynk1wVU3hoHmow3m089wA==&quot; crossorigin=&quot;anonymous&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/script&gt;

  &lt;script&gt;
    function registerHandlebarHelperFunctions() {
      //helper fun

      class GenerateChartParams {
        constructor(height, width, targetData, referenceData, bottomMargin=30, topMargin=5) {
          this.MARGIN = {
            TOP: topMargin,
            RIGHT: 5,
            BOTTOM: bottomMargin,
            LEFT: 55,
          };
          this.SVG_WIDTH = width;
          this.SVG_HEIGHT = height;
          this.CHART_WIDTH = this.SVG_WIDTH - this.MARGIN.LEFT - this.MARGIN.RIGHT;
          this.CHART_HEIGHT = this.SVG_HEIGHT - this.MARGIN.TOP - this.MARGIN.BOTTOM;
          this.svgEl = d3.create(&quot;svg&quot;)
             .attr(&quot;preserveAspectRatio&quot;, &quot;xMinYMin meet&quot;)
             .attr(&quot;viewBox&quot;, `0 0 ${$(window).width()+100} ${$(window).height()-30}`)
             .classed(&quot;svg-content-responsive&quot;, true)
          this.maxYValue = d3.max(targetData, (d) =&gt; Math.abs(d.axisY));
          this.minYValue = d3.min(targetData, (d) =&gt; Math.abs(d.axisY));
          const mergedReferenceData = referenceData.map(({axisX, axisY}) =&gt; {
            return {axisX, axisY}
          })
          const mergedTargetedData = targetData.map(({axisX, axisY}) =&gt; {
            return {axisX, axisY}
          })

          this.charts2 = mergedReferenceData.concat(mergedTargetedData)
          this.charts2 = this.charts2.sort(function(a, b) { return a - b; });

          this.targetBinWidth = targetData[1]?.axisX - targetData[0]?.axisX
          this.referenceBinWidth = referenceData[1]?.axisX - referenceData[0]?.axisX
          this.maxTargetXValue = d3.max(targetData, (d) =&gt; d.axisX);

          this.maxReferenceXValue = d3.max(referenceData, (d) =&gt; d.axisX);

          this.xScale = d3
              .scaleLinear()
         .domain([d3.min(this.charts2, function(d) { return parseFloat(d.axisX); }),(this.maxTargetXValue+this.targetBinWidth &gt;= this.maxReferenceXValue+this.referenceBinWidth) ? this.maxTargetXValue+this.targetBinWidth:this.maxReferenceXValue+this.referenceBinWidth])
         .range([0, this.CHART_WIDTH ]);

         this.svgEl.append(&quot;g&quot;)
             .attr(&quot;transform&quot;, &quot;translate(&quot;+ this.MARGIN.LEFT +&quot;,&quot; + this.SVG_HEIGHT + &quot;)&quot;)
             .call(d3.axisBottom(this.xScale));
          this.yScale = d3.scaleLinear()
              .range([this.CHART_HEIGHT , 0])
              .domain([d3.min(this.charts2, function(d) { return parseFloat(d.axisY); }), d3.max(this.charts2, function(d) { return parseFloat(d.axisY); })*1.2])
              .nice();
        }
      }

      function chartData(column) {
        const data = [];
        if (column?.histogram) {
          for (let i = 0; i&lt;column.histogram.bins.length; i++) {
            data.push({
              axisY: column.histogram.counts[i] || 0,
              axisX: column.histogram.bins[i] || 0,
            });
          }
        } else {
            $(document).ready(() =&gt;
              $(&quot;.desktop-content&quot;).html(`
                &lt;p style=&quot;height: ${$(window).height()}px&quot; class=&quot;error-message&quot;&gt;
                  Something went wrong. Please try again.
                &lt;/p&gt;
              `)
            )
          }

        return data
      }

      function verticalLine(column) {
        const line_data = [];
        if (column?.vertical_line) {
            line_data.push({
              axisX: column?.vertical_line || 0,
            });

        }

        return line_data
      }

      function generateDoubleHistogramChart(targetData, referenceData) {
        let histogramData = [],
            overlappedHistogramData = [];
        let yFormat;

        histogramData = chartData(targetData)
        overlappedHistogramData = chartData(referenceData)
        lineData = verticalLine(targetData)

        const sizes = new GenerateChartParams($(window).height()-80, $(window).width(), histogramData, overlappedHistogramData)
        const {
          MARGIN,
          SVG_WIDTH,
          SVG_HEIGHT,
          CHART_WIDTH,
          CHART_HEIGHT,
          svgEl,
          maxYValue,
          minYValue,
          xScale,
          yScale
        } = sizes

        const rectColors = [&quot;#44C0E7&quot;, &quot;#F5843C&quot;]
        const yAxis = d3.axisLeft(yScale).ticks(SVG_HEIGHT / 40);

        svgEl.append(&quot;g&quot;)
          .attr(&quot;transform&quot;, `translate(${MARGIN.LEFT}, ${MARGIN.BOTTOM})`)
          .call(yAxis)
          .call(g =&gt; g.select(&quot;.domain&quot;).remove())
          .call(g =&gt; g.selectAll(&quot;.tick line&quot;)
              .attr(&quot;x2&quot;, CHART_WIDTH)
              .attr(&quot;stroke-opacity&quot;, 0.1))
          .call(g =&gt; g.append(&quot;text&quot;)
              .attr(&quot;x&quot;, -MARGIN.LEFT)
              .attr(&quot;y&quot;, 10)
              .attr(&quot;fill&quot;, &quot;currentColor&quot;)
              .attr(&quot;text-anchor&quot;, &quot;start&quot;))

        svgEl.append(&quot;line&quot;)
          .attr(&quot;transform&quot;, `translate(${MARGIN.LEFT}, ${MARGIN.BOTTOM})`)
          .data(lineData)
          .attr(&quot;x1&quot;, (d) =&gt; xScale(d.axisX))
          .attr(&quot;y1&quot;, MARGIN.TOP + MARGIN.TOP)
          .attr(&quot;x2&quot;, (d) =&gt; xScale(d.axisX))
          .attr(&quot;y2&quot;, CHART_HEIGHT + MARGIN.TOP)
          .style(&quot;stroke-width&quot;, 2)
          .style(&quot;stroke&quot;, &quot;#44C0E7&quot;)
          .style(&quot;stroke-dasharray&quot;, (3,3))
          .style(&quot;fill&quot;, &quot;none&quot;);

        svgEl.append(&quot;text&quot;)
          .attr(&quot;transform&quot;, &quot;rotate(-90)&quot;)
          .data(lineData)
          .attr(&quot;y&quot;, (d) =&gt; xScale(d.axisX) + MARGIN.LEFT)
          .attr(&quot;x&quot;, 0 - (SVG_HEIGHT / 2))
          .attr(&quot;dy&quot;, &quot;1em&quot;)
          .style(&quot;text-anchor&quot;, &quot;middle&quot;)
          .text(&quot;single value&quot;)
          .style(&quot;font-size&quot;, &quot;15&quot;)
          .style(&quot;opacity&quot;, &quot;0.6&quot;)

        svgEl.append(&quot;text&quot;)
          .attr(&quot;transform&quot;,
                &quot;translate(&quot; + (CHART_WIDTH/2) + &quot; ,&quot; +
                               (CHART_HEIGHT + MARGIN.TOP + 75) + &quot;)&quot;)
          .style(&quot;text-anchor&quot;, &quot;middle&quot;)
          .text(&quot;Values&quot;)
          .style(&quot;font-size&quot;, &quot;15&quot;)
          .style(&quot;opacity&quot;, &quot;0.6&quot;)

        svgEl.append(&quot;text&quot;)
          .attr(&quot;transform&quot;, &quot;rotate(-90)&quot;)
          .attr(&quot;y&quot;, 0)
          .attr(&quot;x&quot;, 0 - (SVG_HEIGHT / 2))
          .attr(&quot;dy&quot;, &quot;1em&quot;)
          .style(&quot;text-anchor&quot;, &quot;middle&quot;)
          .text(&quot;Counts&quot;)
          .style(&quot;font-size&quot;, &quot;15&quot;)
          .style(&quot;opacity&quot;, &quot;0.6&quot;)

          const gChart = svgEl.append(&quot;g&quot;);
          gChart
          .attr(&quot;transform&quot;, &quot;translate(&quot;+ MARGIN.LEFT +&quot;,0)&quot;)
          .selectAll(&quot;.bar&quot;)
          .data(histogramData)
          .enter()
          .append(&quot;rect&quot;)
          .style(&quot;stroke&quot;, &quot;#021826&quot;)
          .classed(&quot;bar&quot;, true)
          .attr(&quot;width&quot;, function(d) { return xScale(histogramData[1]?.axisX)-xScale(histogramData[0]?.axisX); })
          .attr(&quot;height&quot;, (d) =&gt; CHART_HEIGHT - yScale(d.axisY))
          .attr(&quot;x&quot;, 1)
          .attr(&quot;transform&quot;, function(d) { return &quot;translate(&quot; + xScale(d.axisX) + &quot;,&quot; + 0  +  &quot;)&quot;; })
          .attr(&quot;y&quot;, (d) =&gt; yScale(d.axisY) + MARGIN.TOP + MARGIN.BOTTOM)
          .attr(&quot;fill&quot;, rectColors[0])
          .style(&quot;opacity&quot;,&quot;0.6&quot;)

          const gChart1 = svgEl.append(&quot;g&quot;);
          gChart1
          .attr(&quot;transform&quot;, &quot;translate(&quot;+ MARGIN.LEFT +&quot;,0)&quot;)
          .selectAll(&quot;.bar&quot;)
          .data(overlappedHistogramData)
          .enter()
          .append(&quot;rect&quot;)
          .style(&quot;stroke&quot;, &quot;#021826&quot;)
          .classed(&quot;bar&quot;, true)
          .attr(&quot;width&quot;, function(d) { return xScale(overlappedHistogramData[1]?.axisX)-xScale(overlappedHistogramData[0]?.axisX); })
          .attr(&quot;height&quot;, (d) =&gt; CHART_HEIGHT - yScale(d.axisY))
          .attr(&quot;x&quot;, 1)
          .attr(&quot;transform&quot;, function(d) { return &quot;translate(&quot; + xScale(d.axisX) + &quot;,&quot; + 0  +  &quot;)&quot;; })
          .attr(&quot;y&quot;, (d) =&gt; yScale(d.axisY) + MARGIN.TOP + MARGIN.BOTTOM)
          .attr(&quot;fill&quot;, rectColors[1])
          .style(&quot;opacity&quot;,&quot;0.6&quot;)

        return svgEl._groups[0][0].outerHTML;
      }

      const profileFromCSVfile = {&quot;prediction&quot;: {&quot;histogram&quot;: {&quot;start&quot;: 0.0, &quot;end&quot;: 2.0000002, &quot;width&quot;: 0, &quot;counts&quot;: [50, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 50, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 50], &quot;max&quot;: 2.0, &quot;min&quot;: 0.0, &quot;bins&quot;: [0.0, 0.06666667333333334, 0.13333334666666669, 0.20000002000000003, 0.26666669333333337, 0.3333333666666667, 0.40000004000000006, 0.4666667133333334, 0.5333333866666667, 0.6000000600000001, 0.6666667333333334, 0.7333334066666668, 0.8000000800000001, 0.8666667533333334, 0.9333334266666669, 1.0000001, 1.0666667733333335, 1.133333446666667, 1.2000001200000001, 1.2666667933333335, 1.3333334666666667, 1.4000001400000002, 1.4666668133333336, 1.5333334866666668, 1.6000001600000002, 1.6666668333333337, 1.7333335066666669, 1.8000001800000003, 1.8666668533333337, 1.933333526666667, 2.0000002], &quot;n&quot;: 150}}}

      Handlebars.registerHelper(&quot;getDoubleHistogramChart&quot;,(column,key) =&gt; {
          const columnKey = key.data.key
        try {
          if (profileFromCSVfile) {
          return  generateDoubleHistogramChart (
              column,
              profileFromCSVfile[columnKey]
            )
          }
        } catch (err) {
          $(document).ready(() =&gt;
            $(&quot;.desktop-content&quot;).html(`
              &lt;p style=&quot;height: ${$(window).height()}px&quot; class=&quot;error-message&quot;&gt;
                Something went wrong. Please try again.
              &lt;/p&gt;
            `)
          )
        }
      });
    }

    function initWebsiteScripts() {
      $(&quot;.svg-container&quot;).css(&quot;height&quot;, $(window).height() - 32)
    }

    function initHandlebarsTemplate() {
      // Replace this context with JSON from .py file
      const context = {&quot;prediction&quot;: {&quot;histogram&quot;: {&quot;start&quot;: 0.0, &quot;end&quot;: 2.0000002, &quot;width&quot;: 0, &quot;counts&quot;: [50, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 50, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 50], &quot;max&quot;: 2.0, &quot;min&quot;: 0.0, &quot;bins&quot;: [0.0, 0.06666667333333334, 0.13333334666666669, 0.20000002000000003, 0.26666669333333337, 0.3333333666666667, 0.40000004000000006, 0.4666667133333334, 0.5333333866666667, 0.6000000600000001, 0.6666667333333334, 0.7333334066666668, 0.8000000800000001, 0.8666667533333334, 0.9333334266666669, 1.0000001, 1.0666667733333335, 1.133333446666667, 1.2000001200000001, 1.2666667933333335, 1.3333334666666667, 1.4000001400000002, 1.4666668133333336, 1.5333334866666668, 1.6000001600000002, 1.6666668333333337, 1.7333335066666669, 1.8000001800000003, 1.8666668533333337, 1.933333526666667, 2.0000002], &quot;n&quot;: 150}}};
      // Config handlebars and pass data to HBS template
      const source = document.getElementById(&quot;entry-template&quot;).innerHTML;
      const template = Handlebars.compile(source);
      const html = template(context);
      const target = document.getElementById(&quot;generated-html&quot;);
      target.innerHTML = html;
    }

    // Invoke functions -- keep in mind invokation order
    registerHandlebarHelperFunctions();
    initHandlebarsTemplate();
    initWebsiteScripts();
  &lt;/script&gt;
&lt;/html&gt;
" width=100% height=300px
        frameBorder=0></iframe>